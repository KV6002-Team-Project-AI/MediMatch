/*!
 * Built with Duet Design System
 */
import { createPage } from "../../utils/test-utils";
describe("duet-table", () => {
    let page;
    let table;
    const HEADING_1 = "Valtuutettu";
    const HEADING_2 = "Salkun nimi";
    beforeEach(async () => {
        page = await createPage(`
      <meta charset="utf-8" />
      <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/@duetds/fonts@1.3.12/lib/localtapiola.css' />
      <duet-table breakpoint="large">
        <table>
          <thead>
            <tr>
              <th>${HEADING_1}</th>
              <th>${HEADING_2}</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                Hermanni Mikkola<br />
                10.10.1999
              </td>
              <td class="foo">
                Antin salkku<br />
                <duet-link url="/">Siirry salkkuun ›</duet-link>
              </td>
              <td>
                <duet-button margin="none" padding="none" icon="action-delete" variation="plain">
                  Delete
                </duet-button>
              </td>
            </tr>
            <tr>
              <td>
                Jukka-Pekka Routakorpi-Salomaa<br />
                10.11.1988
              </td>
              <td>
                Justiinan ja Jukka-Pekan yhteinen salkku 1234<br />
                <duet-link url="/">Siirry salkkuun ›</duet-link>
              </td>
              <td>
                <duet-button margin="none" padding="none" icon="action-delete" variation="plain">
                  Delete
                </duet-button>
              </td>
            </tr>
            <tr>
              <td>
                Veera Mikkola<br />
                01.01.2001
              </td>
              <td>
                Vapun rahastot<br />
                <duet-link url="/">Siirry salkkuun ›</duet-link>
              </td>
              <td>
                <duet-button margin="none" padding="none" icon="action-delete" variation="plain">
                  Delete
                </duet-button>
              </td>
            </tr>
          </tbody>
        </table>
      </duet-table>
    `);
        table = await page.find("duet-table");
    });
    it("renders", async () => {
        expect(table).toHaveClass("hydrated");
    });
    it("adds column heading span to each cell", async () => {
        let cells = await table.findAll("tbody td:nth-child(1)");
        cells.forEach(async (td) => {
            const span = await td.find("span.duet-table-cell-heading");
            expect(span.textContent).toEqual(HEADING_1);
        });
        cells = await table.findAll("tbody td:nth-child(2)");
        cells.forEach(async (td) => {
            const span = await td.find("span.duet-table-cell-heading");
            expect(span.textContent).toEqual(HEADING_2);
        });
        cells = await table.findAll("tbody td:nth-child(3)");
        cells.forEach(async (td) => {
            const span = await td.find("span.duet-table-cell-heading");
            expect(span).toBeNull();
        });
    });
});
