/*!
 * Built with Duet Design System
 */
const t=Math.min,n=Math.max,e={left:"right",right:"left",bottom:"top",top:"bottom"},o={start:"end",end:"start"};function r(e,o,r){return n(e,t(o,r))}function i(t,n){return"function"==typeof t?t(n):t}function a(t){return t.split("-")[0]}function l(t){return t.split("-")[1]}function c(t){return"x"===t?"y":"x"}function s(t){return"y"===t?"height":"width"}function u(t){return["top","bottom"].includes(a(t))?"y":"x"}function f(t){return c(u(t))}function d(t){return t.replace(/start|end/g,(t=>o[t]))}function y(t){return t.replace(/left|right|bottom|top/g,(t=>e[t]))}function m(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function p(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function x(t,n,e){let{reference:o,floating:r}=t;const i=u(n),c=f(n),d=s(c),y=a(n),m="y"===i,p=o.x+o.width/2-r.width/2,x=o.y+o.height/2-r.height/2,h=o[d]/2-r[d]/2;let g;switch(y){case"top":g={x:p,y:o.y-r.height};break;case"bottom":g={x:p,y:o.y+o.height};break;case"right":g={x:o.x+o.width,y:x};break;case"left":g={x:o.x-r.width,y:x};break;default:g={x:o.x,y:o.y}}switch(l(n)){case"start":g[c]-=h*(e&&m?-1:1);break;case"end":g[c]+=h*(e&&m?-1:1)}return g}async function h(t,n){var e;void 0===n&&(n={});const{x:o,y:r,platform:a,rects:l,elements:c,strategy:s}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:y=!1,padding:x=0}=i(n,t),h=m(x),g=c[y?"floating"===d?"reference":"floating":d],w=p(await a.getClippingRect({element:null==(e=await(null==a.isElement?void 0:a.isElement(g)))||e?g:g.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(c.floating)),boundary:u,rootBoundary:f,strategy:s})),b="floating"===d?{...l.floating,x:o,y:r}:l.reference,v=await(null==a.getOffsetParent?void 0:a.getOffsetParent(c.floating)),A=await(null==a.isElement?void 0:a.isElement(v))&&await(null==a.getScale?void 0:a.getScale(v))||{x:1,y:1},k=p(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:b,offsetParent:v,strategy:s}):b);return{top:(w.top-k.top+h.top)/A.y,bottom:(k.bottom-w.bottom+h.bottom)/A.y,left:(w.left-k.left+h.left)/A.x,right:(k.right-w.right+h.right)/A.x}}const g=n=>({name:"arrow",options:n,async fn(e){const{x:o,y:a,placement:c,rects:u,platform:d,elements:y}=e,{element:p,padding:x=0}=i(n,e)||{};if(null==p)return{};const h=m(x),g={x:o,y:a},w=f(c),b=s(w),v=await d.getDimensions(p),A="y"===w,k=A?"top":"left",S=A?"bottom":"right",R=A?"clientHeight":"clientWidth",P=u.reference[b]+u.reference[w]-g[w]-u.floating[b],C=g[w]-u.reference[w],D=await(null==d.getOffsetParent?void 0:d.getOffsetParent(p));let F=D?D[R]:0;F&&await(null==d.isElement?void 0:d.isElement(D))||(F=y.floating[R]||u.floating[b]);const M=P/2-C/2,T=F/2-v[b]/2-1,B=t(h[k],T),L=t(h[S],T),E=B,O=F-v[b]-L,N=F/2-v[b]/2+M,j=r(E,N,O),H=null!=l(c)&&N!=j&&u.reference[b]/2-(N<E?B:L)-v[b]/2<0?N<E?E-N:O-N:0;return{[w]:g[w]-H,data:{[w]:j,centerOffset:N-j+H}}}}),w=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(n){var e;const{placement:o,middlewareData:r,rects:c,initialPlacement:u,platform:m,elements:p}=n,{mainAxis:x=!0,crossAxis:g=!0,fallbackPlacements:w,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:A=!0,...k}=i(t,n),S=a(o),R=a(u)===u,P=await(null==m.isRTL?void 0:m.isRTL(p.floating)),C=w||(R||!A?[y(u)]:function(t){const n=y(t);return[d(t),n,d(n)]}(u));w||"none"===v||C.push(...function(t,n,e,o){const r=l(t);let i=function(t,n,e){const o=["left","right"],r=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return e?n?r:o:n?o:r;case"left":case"right":return n?i:a;default:return[]}}(a(t),"start"===e,o);return r&&(i=i.map((t=>t+"-"+r)),n&&(i=i.concat(i.map(d)))),i}(u,A,v,P));const D=[u,...C],F=await h(n,k),M=[];let T=(null==(e=r.flip)?void 0:e.overflows)||[];if(x&&M.push(F[S]),g){const t=function(t,n,e){void 0===e&&(e=!1);const o=l(t),r=f(t),i=s(r);let a="x"===r?o===(e?"end":"start")?"right":"left":"start"===o?"bottom":"top";return n.reference[i]>n.floating[i]&&(a=y(a)),[a,y(a)]}(o,c,P);M.push(F[t[0]],F[t[1]])}if(T=[...T,{placement:o,overflows:M}],!M.every((t=>t<=0))){var B,L;const t=((null==(B=r.flip)?void 0:B.index)||0)+1,n=D[t];if(n)return{data:{index:t,overflows:T},reset:{placement:n}};let e=null==(L=T.filter((t=>t.overflows[0]<=0)).sort(((t,n)=>t.overflows[1]-n.overflows[1]))[0])?void 0:L.placement;if(!e)switch(b){case"bestFit":{var E;const t=null==(E=T.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,n)=>t+n),0)])).sort(((t,n)=>t[1]-n[1]))[0])?void 0:E[0];t&&(e=t);break}case"initialPlacement":e=u}if(o!==e)return{reset:{placement:e}}}return{}}}},b=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(n){const{x:e,y:o}=n,r=await async function(t,n){const{placement:e,platform:o,elements:r}=t,c=await(null==o.isRTL?void 0:o.isRTL(r.floating)),s=a(e),f=l(e),d="y"===u(e),y=["left","top"].includes(s)?-1:1,m=c&&d?-1:1,p=i(n,t);let{mainAxis:x,crossAxis:h,alignmentAxis:g}="number"==typeof p?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return f&&"number"==typeof g&&(h="end"===f?-1*g:g),d?{x:h*m,y:x*y}:{x:x*y,y:h*m}}(n,t);return{x:e+r.x,y:o+r.y,data:r}}}},v=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(n){const{x:e,y:o,placement:l}=n,{mainAxis:s=!0,crossAxis:f=!1,limiter:d={fn:t=>{let{x:n,y:e}=t;return{x:n,y:e}}},...y}=i(t,n),m={x:e,y:o},p=await h(n,y),x=u(a(l)),g=c(x);let w=m[g],b=m[x];s&&(w=r(w+p["y"===g?"top":"left"],w,w-p["y"===g?"bottom":"right"])),f&&(b=r(b+p["y"===x?"top":"left"],b,b-p["y"===x?"bottom":"right"]));const v=d.fn({...n,[g]:w,[x]:b});return{...v,data:{x:v.x-e,y:v.y-o}}}}};function A(t){var n;return(null==(n=t.ownerDocument)?void 0:n.defaultView)||window}function k(t){return A(t).getComputedStyle(t)}function S(t){return t instanceof A(t).Node}function R(t){return S(t)?(t.nodeName||"").toLowerCase():""}function P(t){return t instanceof A(t).HTMLElement}function C(t){return t instanceof A(t).Element}function D(t){return"undefined"!=typeof ShadowRoot&&(t instanceof A(t).ShadowRoot||t instanceof ShadowRoot)}function F(t){const{overflow:n,overflowX:e,overflowY:o,display:r}=k(t);return/auto|scroll|overlay|hidden|clip/.test(n+o+e)&&!["inline","contents"].includes(r)}function M(t){return["table","td","th"].includes(R(t))}function T(t){const n=B(),e=k(t);return"none"!==e.transform||"none"!==e.perspective||!n&&!!e.backdropFilter&&"none"!==e.backdropFilter||!n&&!!e.filter&&"none"!==e.filter||["transform","perspective","filter"].some((t=>(e.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(e.contain||"").includes(t)))}function B(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function L(t){return["html","body","#document"].includes(R(t))}const E=Math.min,O=Math.max,N=Math.round;function j(t){const n=k(t);let e=parseFloat(n.width)||0,o=parseFloat(n.height)||0;const r=P(t),i=r?t.offsetWidth:e,a=r?t.offsetHeight:o,l=N(e)!==i||N(o)!==a;return l&&(e=i,o=a),{width:e,height:o,fallback:l}}function H(t){return C(t)?t:t.contextElement}const V={x:1,y:1};function W(t){const n=H(t);if(!P(n))return V;const e=n.getBoundingClientRect(),{width:o,height:r,fallback:i}=j(n);let a=(i?N(e.width):e.width)/o,l=(i?N(e.height):e.height)/r;return a&&Number.isFinite(a)||(a=1),l&&Number.isFinite(l)||(l=1),{x:a,y:l}}const X={x:0,y:0};function Y(t,n,e){var o,r;if(void 0===n&&(n=!0),!B())return X;const i=t?A(t):window;return!e||n&&e!==i?X:{x:(null==(o=i.visualViewport)?void 0:o.offsetLeft)||0,y:(null==(r=i.visualViewport)?void 0:r.offsetTop)||0}}function _(t,n,e,o){void 0===n&&(n=!1),void 0===e&&(e=!1);const r=t.getBoundingClientRect(),i=H(t);let a=V;n&&(o?C(o)&&(a=W(o)):a=W(t));const l=Y(i,e,o);let c=(r.left+l.x)/a.x,s=(r.top+l.y)/a.y,u=r.width/a.x,f=r.height/a.y;if(i){const t=A(i),n=o&&C(o)?A(o):o;let e=t.frameElement;for(;e&&o&&n!==t;){const t=W(e),n=e.getBoundingClientRect(),o=getComputedStyle(e);n.x+=(e.clientLeft+parseFloat(o.paddingLeft))*t.x,n.y+=(e.clientTop+parseFloat(o.paddingTop))*t.y,c*=t.x,s*=t.y,u*=t.x,f*=t.y,c+=n.x,s+=n.y,e=A(e).frameElement}}return p({width:u,height:f,x:c,y:s})}function q(t){return((S(t)?t.ownerDocument:t.document)||window.document).documentElement}function z(t){return C(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function G(t){return _(q(t)).left+z(t).scrollLeft}function I(t){if("html"===R(t))return t;const n=t.assignedSlot||t.parentNode||D(t)&&t.host||q(t);return D(n)?n.host:n}function J(t){const n=I(t);return L(n)?n.ownerDocument.body:P(n)&&F(n)?n:J(n)}function K(t,n){var e;void 0===n&&(n=[]);const o=J(t),r=o===(null==(e=t.ownerDocument)?void 0:e.body),i=A(o);return r?n.concat(i,i.visualViewport||[],F(o)?o:[]):n.concat(o,K(o))}function Q(t,n,e){let o;if("viewport"===n)o=function(t,n){const e=A(t),o=q(t),r=e.visualViewport;let i=o.clientWidth,a=o.clientHeight,l=0,c=0;if(r){i=r.width,a=r.height;const t=B();(!t||t&&"fixed"===n)&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:a,x:l,y:c}}(t,e);else if("document"===n)o=function(t){const n=q(t),e=z(t),o=t.ownerDocument.body,r=O(n.scrollWidth,n.clientWidth,o.scrollWidth,o.clientWidth),i=O(n.scrollHeight,n.clientHeight,o.scrollHeight,o.clientHeight);let a=-e.scrollLeft+G(t);const l=-e.scrollTop;return"rtl"===k(o).direction&&(a+=O(n.clientWidth,o.clientWidth)-r),{width:r,height:i,x:a,y:l}}(q(t));else if(C(n))o=function(t,n){const e=_(t,!0,"fixed"===n),o=e.top+t.clientTop,r=e.left+t.clientLeft,i=P(t)?W(t):{x:1,y:1};return{width:t.clientWidth*i.x,height:t.clientHeight*i.y,x:r*i.x,y:o*i.y}}(n,e);else{const e=Y(t);o={...n,x:n.x-e.x,y:n.y-e.y}}return p(o)}function U(t,n){const e=I(t);return!(e===n||!C(e)||L(e))&&("fixed"===k(e).position||U(e,n))}function Z(t,n){return P(t)&&"fixed"!==k(t).position?n?n(t):t.offsetParent:null}function $(t,n){const e=A(t);if(!P(t))return e;let o=Z(t,n);for(;o&&M(o)&&"static"===k(o).position;)o=Z(o,n);return o&&("html"===R(o)||"body"===R(o)&&"static"===k(o).position&&!T(o))?e:o||function(t){let n=I(t);for(;P(n)&&!L(n);){if(T(n))return n;n=I(n)}return null}(t)||e}function tt(t,n,e){const o=P(n),r=q(n),i="fixed"===e,a=_(t,!0,i,n);let l={scrollLeft:0,scrollTop:0};const c={x:0,y:0};if(o||!o&&!i)if(("body"!==R(n)||F(r))&&(l=z(n)),P(n)){const t=_(n,!0,i,n);c.x=t.x+n.clientLeft,c.y=t.y+n.clientTop}else r&&(c.x=G(r));return{x:a.left+l.scrollLeft-c.x,y:a.top+l.scrollTop-c.y,width:a.width,height:a.height}}const nt={getClippingRect:function(t){let{element:n,boundary:e,rootBoundary:o,strategy:r}=t;const i=[..."clippingAncestors"===e?function(t,n){const e=n.get(t);if(e)return e;let o=K(t).filter((t=>C(t)&&"body"!==R(t))),r=null;const i="fixed"===k(t).position;let a=i?I(t):t;for(;C(a)&&!L(a);){const n=k(a),e=T(a);e||"fixed"!==n.position||(r=null),(i?!e&&!r:!e&&"static"===n.position&&r&&["absolute","fixed"].includes(r.position)||F(a)&&!e&&U(t,a))?o=o.filter((t=>t!==a)):r=n,a=I(a)}return n.set(t,o),o}(n,this._c):[].concat(e),o],a=i.reduce(((t,e)=>{const o=Q(n,e,r);return t.top=O(o.top,t.top),t.right=E(o.right,t.right),t.bottom=E(o.bottom,t.bottom),t.left=O(o.left,t.left),t}),Q(n,i[0],r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:n,offsetParent:e,strategy:o}=t;const r=P(e),i=q(e);if(e===i)return n;let a={scrollLeft:0,scrollTop:0},l={x:1,y:1};const c={x:0,y:0};if((r||!r&&"fixed"!==o)&&(("body"!==R(e)||F(i))&&(a=z(e)),P(e))){const t=_(e);l=W(e),c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-a.scrollLeft*l.x+c.x,y:n.y*l.y-a.scrollTop*l.y+c.y}},isElement:C,getDimensions:function(t){return j(t)},getOffsetParent:$,getDocumentElement:q,getScale:W,async getElementRects(t){let{reference:n,floating:e,strategy:o}=t;const r=this.getOffsetParent||$,i=this.getDimensions;return{reference:tt(n,await r(e),o),floating:{x:0,y:0,...await i(e)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>"rtl"===k(t).direction},et=(t,n,e)=>{const o=new Map,r={platform:nt,...e},i={...r.platform,_c:o};return(async(t,n,e)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:a}=e,l=i.filter(Boolean),c=await(null==a.isRTL?void 0:a.isRTL(n));let s=await a.getElementRects({reference:t,floating:n,strategy:r}),{x:u,y:f}=x(s,o,c),d=o,y={},m=0;for(let e=0;e<l.length;e++){const{name:i,fn:p}=l[e],{x:h,y:g,data:w,reset:b}=await p({x:u,y:f,initialPlacement:o,placement:d,strategy:r,middlewareData:y,rects:s,platform:a,elements:{reference:t,floating:n}});u=null!=h?h:u,f=null!=g?g:f,y={...y,[i]:{...y[i],...w}},b&&m<=50&&(m++,"object"==typeof b&&(b.placement&&(d=b.placement),b.rects&&(s=!0===b.rects?await a.getElementRects({reference:t,floating:n,strategy:r}):b.rects),({x:u,y:f}=x(s,d,c))),e=-1)}return{x:u,y:f,placement:d,strategy:r,middlewareData:y}})(t,n,{...r,platform:i})};export{g as a,et as c,w as f,b as o,v as s}