/*!
 * Built with Duet Design System
 */
import{r as t,h as i,H as s,g as e}from"./p-662da762.js";import{m as o,a as h}from"./p-5e849463.js";import{c as a,f as n,s as l,a as r}from"./p-00c8a755.js";import{i as p}from"./p-a58bd561.js";import{c as d}from"./p-5e59e970.js";import{f as c}from"./p-2bb2b022.js";import{a as m,g as u,c as b,d as g}from"./p-2e36d5bf.js";import"./p-0e052642.js";const f=class{constructor(i){t(this,i),this.mql=[window.matchMedia(o.replace(/'/g,"")),window.matchMedia(h.replace(/'/g,""))],this.tooltipId=d("DuetTooltip"),this.aboutString={fi:"aiheesta",en:"about",sv:"om"},this.openTooltip=()=>{this.active=!0,this.focusTarget="tooltip"},this.closeTooltip=(t=!1)=>{this.active=!1,t&&(this.focusTarget="trigger"),setTimeout((()=>{this.updatePlacement()}),200)},this.toggleOpen=()=>{this.active?this.closeTooltip():this.openTooltip()},this.updatePlacement=async()=>{var t,i;let s=!0;("large"!==this.breakpoint||this.mql[1].matches)&&("medium"!==this.breakpoint||this.mql[0].matches)||(s=!1);let e=s?"top-start":"top-end";"left"===this.direction?e="top-end":"right"===this.direction&&(e="top-start");const o=await a(this.buttonEl,this.popupElement,{placement:e,middleware:[n(),l({padding:5}),r({element:this.arrowEl})]});this.tooltipY=o.y,this.tooltipX=o.x,this.placement=o.placement,this.arrowY=null===(t=o.middlewareData.arrow)||void 0===t?void 0:t.y,this.arrowX=null===(i=o.middlewareData.arrow)||void 0===i?void 0:i.x},this.placement="bottom",this.tooltipY=void 0,this.tooltipX=void 0,this.arrowX=void 0,this.arrowY=void 0,this.theme="",this.language=m(),this.accessibleLabelDefault={fi:"Näytä lisätietoja",en:"Show more information",sv:"Visa mer tilläggsuppgifter"},this.accessibleLabel=u(this.accessibleLabelDefault,this.language),this.accessibleAboutLabel=void 0,this.accessibleInputLabel=void 0,this.accessibleCloseLabelDefault={fi:"Sulje lisätiedot",en:"Close details",sv:"Stäng tilläggsuppgifter"},this.accessibleCloseLabel=u(this.accessibleCloseLabelDefault,this.language),this.label="",this.breakpoint="medium",this.direction="auto",this.positionVertical="0",this.positionHorizontal="0",this.active=!1}componentWillLoad(){p(this)}async componentDidLoad(){this.arrowEl=await this.popupElement.getArrowElement(),this.contentEl=await this.popupElement.getContentElement(),this.updatePlacement(),this.active&&this.openTooltip(),this.intersectionObserver=new IntersectionObserver(this.updatePlacement,{root:document.body}),this.intersectionObserver.observe(this.element)}componentDidUpdate(){switch(this.focusTarget){case"tooltip":setTimeout((()=>this.contentEl.focus({preventScroll:!0})));break;case"trigger":setTimeout((()=>this.buttonEl.setFocus({preventScroll:!0})))}this.focusTarget=null}connectedCallback(){b(this,[{prop:"accessibleLabel",defaults:"accessibleLabelDefault"},{prop:"accessibleCloseLabel",defaults:"accessibleCloseLabelDefault"}])}disconnectedCallback(){g(this)}onScroll(){clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((()=>{this.active&&this.updatePlacement()}),100)}handleWindowResize(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((()=>{this.updatePlacement()}),100)}handleDocumentClick(t){this.active&&t.composedPath().every((t=>t!==this.element&&t!==this.contentEl))&&this.closeTooltip()}handleKeyDown(t){this.active&&c(t)&&this.closeTooltip(!0)}handlePopupClose(){this.active&&this.closeTooltip(!0)}async handleActiveChange(t){t?setTimeout((()=>this.updatePlacement()),10):setTimeout((()=>this.updatePlacement()),300)}render(){const t={position:"relative",overflow:this.active?"visible":"hidden"},e={top:`${this.tooltipY}px`,left:`${this.tooltipX}px`,display:"block","pointer-events":this.active?"auto":"none"},o={top:this.arrowY?`${this.arrowY}px`:void 0,left:this.arrowX?`${this.arrowX}px`:void 0};return i(s,{style:{transform:`translateY(${this.positionVertical}) translateX(${this.positionHorizontal})`,zIndex:this.active?"201":""}},i("duet-tooltip-button",{ref:t=>this.buttonEl=t,active:this.active,tooltipId:this.tooltipId,label:this.label,accessibleLabel:this.accessibleInputLabel&&`${this.accessibleInputLabel}, ${this.accessibleLabel}`||this.accessibleAboutLabel&&`${this.accessibleLabel} ${this.aboutString[this.language]} ${this.accessibleAboutLabel}`||this.accessibleLabel,onClick:this.toggleOpen,theme:this.theme}),i("div",{style:t},i("duet-tooltip-popup",{ref:t=>this.popupElement=t,active:this.active,tooltipId:this.tooltipId,arrowStyles:o,style:e,placement:this.placement,accessibleCloseLabel:this.accessibleCloseLabel,theme:this.theme},i("slot",null))))}get element(){return e(this)}static get watchers(){return{active:["handleActiveChange"]}}};f.style="*.sc-duet-tooltip,*.sc-duet-tooltip::after,*.sc-duet-tooltip::before{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}.sc-duet-tooltip-h{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none;z-index:200;display:inline-flex;width:auto;margin-top:-16px !important;margin-left:-3px !important;-webkit-tap-highlight-color:transparent}duet-tooltip-button.sc-duet-tooltip{position:relative}duet-tooltip-popup.sc-duet-tooltip{position:absolute}";export{f as duet_tooltip}