var __awaiter=this&&this.__awaiter||function(t,e,i,a){function n(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,r){function d(t){try{l(a.next(t))}catch(t){r(t)}}function o(t){try{l(a["throw"](t))}catch(t){r(t)}}function l(t){t.done?i(t.value):n(t.value).then(d,o)}l((a=a.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var i={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},a,n,r,d;return d={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(d[Symbol.iterator]=function(){return this}),d;function o(t){return function(e){return l([t,e])}}function l(o){if(a)throw new TypeError("Generator is already executing.");while(d&&(d=0,o[0]&&(i=0)),i)try{if(a=1,n&&(r=o[0]&2?n["return"]:o[0]?n["throw"]||((r=n["return"])&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;if(n=0,r)o=[o[0]&2,r.value];switch(o[0]){case 0:case 1:r=o;break;case 4:i.label++;return{value:o[1],done:false};case 5:i.label++;n=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(r=i.trys,r=r.length>0&&r[r.length-1])&&(o[0]===6||o[0]===2)){i=0;continue}if(o[0]===3&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(o[0]===6&&i.label<r[1]){i.label=r[1];r=o;break}if(r&&i.label<r[2]){i.label=r[2];i.ops.push(o);break}if(r[2])i.ops.pop();i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t];n=0}finally{a=r=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(t,e,i){if(i||arguments.length===2)for(var a=0,n=e.length,r;a<n;a++){if(r||!(a in e)){if(!r)r=Array.prototype.slice.call(e,0,a);r[a]=e[a]}}return t.concat(r||Array.prototype.slice.call(e))};
/*!
 * Built with Duet Design System
 */System.register(["./p-610b364b.system.js","./p-50f4bca2.system.js","./p-41982d26.system.js","./p-5795b0d9.system.js","./p-224f6c46.system.js","./p-21774475.system.js","./p-9bd338fd.system.js","./p-e6b5a1c7.system.js","./p-da20db91.system.js","./p-6ef75455.system.js"],(function(t){"use strict";var e,i,a,n,r,d,o,l,s,u,h,f,b,p,c,m,g,v,y,x,w,k;return{setters:[function(t){e=t.h;i=t.r;a=t.c;n=t.H;r=t.g;d=t.F},function(t){o=t.i},function(t){l=t.f;s=t.d},function(t){u=t.i},function(t){h=t.a;f=t.c;b=t.d;p=t.g;c=t.s},function(t){m=t.p;g=t.s},function(t){v=t.b;y=t.a},function(t){x=t.c},function(t){w=t.g;k=t.a},function(){}],execute:function(){var _=function(t,i){var a=t.data,n=t.groupId,r=t.alignment;var d="duet-editable-table duet-editable-table-content-".concat(n);if(typeof a==="string"){return e("td",{innerHTML:a,class:d,part:"".concat(n,"content"),style:{verticalAlign:r}})}else{return e("td",{class:d,part:"".concat(n,"content"),style:{verticalAlign:r}},a)}};var T=".sc-duet-editable-table-h{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}.duet-editable-table-actions-menu.sc-duet-editable-table{position:relative;padding:0 !important;margin:0}.duet-editable-table-actions-menu-button.sc-duet-editable-table{position:relative;right:-16px;float:right;padding:0}.duet-editable-table-actions-menu-icon.sc-duet-editable-table .duet-icon.sc-duet-editable-table{max-width:16px;max-height:16px}.duet-editable-table-row.duet-table-action-row.sc-duet-editable-table .duet-text-right.sc-duet-editable-table{text-align:right}.duet-editable-table-header.sc-duet-editable-table tr.sc-duet-editable-table .duet-editable-table-header-hidden.sc-duet-editable-table{padding:0 !important;font-size:0;border-bottom:0}";var j=t("duet_editable_table",function(){function t(t){var e=this;i(this,t);this.duetTableToggle=a(this,"duetTableToggle",7);this.duetMenuClick=a(this,"duetMenuClick",7);this.hasHeadSlotFirst=false;this.hasHeadSlotLast=false;this.hasFootSlot=false;this.sortableDefaultLabel={fi:"Järjestä",en:"Click to sort",sv:"Klicka för att sortera"};this.actionColumnLabel={en:"Actions for rows",fi:"Toiminnot rivillä",sv:"Åtgärder för rader"};this.toggleColumn=function(t,i){i.preventDefault();var a=t.sort_order,n=t.direction,r=t.index,d=t.key;e.duetTableToggle.emit({sort_order:a,index:r,direction:n,key:d,component:"duet-editable-table",originalEvent:i})};this.handleKeyDown=function(t,i){if(u(i)){e.toggleColumn(t,i)}};this.language=h();this.margin="auto";this.variation="striped";this.sticky=false;this.stickyDistance="with-links";this.breakpoint="small";this.actions=undefined;this.columns=undefined;this.rows=undefined;this.sortable=false;this.groupId="";this.theme="";this.accessibleRole=undefined;this.hideHeadVisually=false}t.prototype.componentWillLoad=function(){o(this);this.hasHeadSlotFirst=!!this.element.querySelector("[slot='thead-first']");this.hasHeadSlotLast=!!this.element.querySelector("[slot='thead-last']");this.hasFootSlot=!!this.element.querySelector("[slot='tfoot']")};t.prototype.connectedCallback=function(){f(this)};t.prototype.disconnectedCallback=function(){b(this)};t.prototype.createLabel=function(t){var i=this;var a=t.sort_order,n=t.direction,r=t.index,d=t.label;var o=p(d);if(!this.sortable){return o}var l=function(){if(!!a&&n===1){return"action-arrow-down-small"}else if(!!a&&n===-1){return"action-arrow-up-small"}return"action-subtract-small"};return e("span",{class:"duet-table-label","data-index":r},e("duet-button",{size:"small",icon:l(),"icon-size":"medium-small","accessible-label":this.sortableDefaultLabel[this.language],variation:"plain",margin:"none","icon-right":true,onClick:function(e){return i.toggleColumn(t,e)},onKeyDown:function(e){return i.handleKeyDown(t,e)}},o))};t.prototype.getSortedColumns=function(){return __spreadArray([],this.columns,true).sort(l(["index"]))};t.prototype.getRowSortOrder=function(){var t=__spreadArray([],this.columns,true).sort(l(["sort_order"]));return t.filter((function(t){return t.sort_order})).map((function(t){return t.direction===-1?"-".concat(t.key):t.key}))};t.prototype.renderTableHeader=function(){var t=this;if(!this.columns){return}var i=this.getSortedColumns();return e("tr",{class:{"duet-table-action-header":!!this.actions}},i.map((function(i){if(i.display!==false){var a=t.createLabel(i);return a!==""?e("th",{scope:"col"},a):e("td",null)}})),this.actions&&e("th",{scope:"col",class:"duet-table-action-header-heading"},this.actions&&e("duet-visually-hidden",null,this.actionColumnLabel[this.language])))};t.prototype.renderActions=function(t,i){var a=this;if(!this.actions){return}return e("td",{class:"duet-text-right"},this.actions.map((function(n){return e("duet-action-button",{actionMeta:Object.assign({},(t===null||t===void 0?void 0:t.meta)||{},{index:i}),actionId:(t===null||t===void 0?void 0:t.uid)||(t===null||t===void 0?void 0:t.id)||null,actionName:n.name,theme:a.theme,iconName:n.icon,iconColor:n.color,iconSize:n.size,background:n.background,"accessible-label":"".concat(t.actionDescription||""," ").concat(p(n.label)," ")})})))};t.prototype.renderTableBody=function(){var t=this;var i=this.getSortedColumns();var a=this.getRowSortOrder();var n=__spreadArray([],this.rows,true).sort(l(a));return n.map((function(a,n){var r;return e("tr",{class:(r={"duet-table-action-row":!!t.actions,"duet-editable-table-row":true},r["duet-editable-table-row-".concat(t.groupId)]=true,r),"data-meta":JSON.stringify(a.meta)},i.map((function(i){var n=a[i.key]?a[i.key]:a.item;if(i.display!==false){return e(_,{data:n,groupId:t.groupId})}})),t.actions&&t.renderActions(a,n))}))};t.prototype.render=function(){var t;return e(n,{class:(t={},t["duet-editable-table-".concat(this.variation)]=true,t["duet-editable-table"]=true,t["duet-editable-table-".concat(this.theme)]=true,t["duet-editable-table-scrollable"]=this.breakpoint==="none-scrollable",t["duet-editable-table-sortable"]=this.sortable,t["duet-editable-table-actions"]=!!this.actions,t["duet-m-0"]=this.margin==="none",t["duet-theme-turva"]=this.theme==="turva",t)},e("duet-table",{class:"duet-editable-table-table",sticky:this.sticky,stickyDistance:this.stickyDistance,margin:this.margin,theme:this.theme,variation:this.variation,breakpoint:this.breakpoint,"hide-head-visually":this.hideHeadVisually},e("table",{role:this.accessibleRole},e("caption",null,e("slot",{name:"tcaption"})),e("thead",null,this.hasHeadSlotFirst&&e("tr",null,e("td",{class:"duet-editable-table-actions-menu",colSpan:99},e("slot",{name:"thead-first"}))),this.renderTableHeader(),this.hasHeadSlotLast&&e("tr",null,e("td",{class:"duet-editable-table-actions-menu",colSpan:99},e("slot",{name:"thead-last"})))),e("tbody",null,this.renderTableBody()),this.hasFootSlot&&e("tfoot",null,e("tr",null,e("td",{class:"duet-editable-table-footer-menu",colSpan:99},e("slot",{name:"tfoot"})))))))};Object.defineProperty(t.prototype,"element",{get:function(){return r(this)},enumerable:false,configurable:true});return t}());j.style=T;var E='duet-table{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none;margin-bottom:20px !important;display:block;font-variant-numeric:tabular-nums}duet-table table,duet-table thead,duet-table tbody,duet-table tfoot,duet-table th,duet-table td,duet-table tr{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}duet-table.duet-m-0{margin:0 !important}duet-table table{width:100%;font-family:"localtapiola-sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size:1rem;text-align:left;border-spacing:0;border-collapse:separate}duet-table.duet-table-hide-head-visually.duet-table-hide-head-visually thead,duet-table.duet-table-hide-head-visually.duet-table-hide-head-visually thead *{position:absolute !important;top:0;width:1px !important;height:1px !important;padding:0 !important;overflow:hidden !important;clip:rect(1px, 1px, 1px, 1px) !important;border:0 !important}duet-table.duet-theme-turva table{font-family:"turva-sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"}duet-table td{-webkit-hyphens:auto;hyphens:auto;color:rgb(0, 41, 77)}duet-table.duet-theme-turva td{color:rgb(23, 28, 58)}duet-table th{font-weight:600;line-height:1.25;color:rgb(101, 119, 135);text-align:left}duet-table.duet-theme-turva th{color:rgb(116, 116, 117)}duet-table tbody th{font-weight:600;color:rgb(0, 41, 77)}duet-table.duet-theme-turva tbody th{color:rgb(23, 28, 58)}duet-table .duet-table-action-row td:last-child{justify-self:end;padding-right:20px !important;white-space:nowrap}duet-table span.duet-table-cell-heading{display:none}.duet-table-flattened table,.duet-table-flattened thead,.duet-table-flattened tbody,.duet-table-flattened tfoot,.duet-table-flattened th,.duet-table-flattened td,.duet-table-flattened tr{display:block}.duet-table-flattened thead tr{position:absolute !important;top:0;width:1px !important;height:1px !important;padding:0 !important;overflow:hidden !important;clip:rect(1px, 1px, 1px, 1px) !important;border:0 !important}.duet-table-flattened td{line-height:1.25}.duet-table-flattened td:not(:last-child){margin-bottom:16px !important}.duet-table-flattened td span.duet-table-cell-heading{margin-bottom:4px !important;display:block;font-size:1rem;font-weight:600;color:rgb(0, 41, 77)}.duet-table-flattened.duet-theme-turva td span.duet-table-cell-heading{color:rgb(23, 28, 58)}.duet-table-flattened tbody td,.duet-table-flattened tbody th,.duet-table-flattened tfoot td{padding:0 !important;text-align:left !important}.duet-table-flattened tbody th{font-weight:600;line-height:1.25;color:rgb(101, 119, 135);text-align:left}.duet-table-sticky thead th{position:sticky;top:0;background:rgb(255, 255, 255)}.duet-table-striped td,.duet-table-striped th{padding:20px !important}@media (max-width: 35.9375em){.duet-table-striped td,.duet-table-striped th{padding:20px 12px !important}}.duet-table-striped tbody th{background:rgb(255, 255, 255)}.duet-table-striped.duet-table-sticky thead th{border-bottom:1px solid rgb(225, 227, 230)}.duet-table-striped.duet-table-sticky.duet-theme-turva thead th{border-bottom-color:rgb(228, 228, 230)}.duet-table-striped tbody:not(:first-of-type) th{padding-top:40px !important}.duet-table-striped tbody:only-of-type tr:nth-of-type(odd){background:rgba(0, 80, 128, 0.04)}.duet-table-striped.duet-theme-turva tbody:only-of-type tr:nth-of-type(odd){background:rgba(23, 28, 58, 0.04)}.duet-table-striped tbody:not(:only-of-type) tr:nth-of-type(even){background:rgba(0, 80, 128, 0.04)}.duet-table-striped.duet-theme-turva tbody:not(:only-of-type) tr:nth-of-type(even){background:rgba(23, 28, 58, 0.04)}.duet-table-striped tfoot td{border-top:1px solid rgb(225, 227, 230)}.duet-table-striped.duet-theme-turva tfoot td{border-top-color:rgb(228, 228, 230)}.duet-table-striped.duet-table-flattened tbody:not(:first-of-type) th{padding-top:20px !important}.duet-table-striped.duet-table-flattened tr{padding:20px !important}.duet-table-striped.duet-table-flattened tfoot td{border-top:0}.duet-table-striped.duet-table-flattened tfoot tr{border-top:1px solid rgb(225, 227, 230)}.duet-table-striped.duet-table-flattened.duet-theme-turva tfoot tr{border-top-color:rgb(228, 228, 230)}.duet-table-fixed th,.duet-table-minimal th,.duet-table-plain th{padding:16px !important;border-bottom:1px solid rgb(101, 119, 135)}.duet-table-fixed th:first-child,.duet-table-minimal th:first-child,.duet-table-plain th:first-child{padding-left:0 !important}.duet-table-fixed th:last-child,.duet-table-minimal th:last-child,.duet-table-plain th:last-child{padding-right:0 !important}.duet-theme-turva.duet-table-fixed th,.duet-theme-turva.duet-table-minimal th,.duet-theme-turva.duet-table-plain th{border-bottom-color:rgb(68, 68, 69)}.duet-table-fixed tbody th,.duet-table-minimal tbody th,.duet-table-plain tbody th{padding-top:40px !important;border-bottom-color:rgb(225, 227, 230)}.duet-theme-turva.duet-table-fixed tbody th,.duet-theme-turva.duet-table-minimal tbody th,.duet-theme-turva.duet-table-plain tbody th{border-bottom-color:rgb(228, 228, 230)}.duet-table-fixed td,.duet-table-minimal td,.duet-table-plain td{padding:16px !important}.duet-table-fixed td:first-child,.duet-table-minimal td:first-child,.duet-table-plain td:first-child{padding-left:0 !important}.duet-table-fixed td:last-child,.duet-table-minimal td:last-child,.duet-table-plain td:last-child{padding-right:0 !important}.duet-table-fixed tbody td,.duet-table-minimal tbody td,.duet-table-plain tbody td{border-bottom:1px solid rgb(225, 227, 230)}.duet-theme-turva.duet-table-fixed tbody td,.duet-theme-turva.duet-table-minimal tbody td,.duet-theme-turva.duet-table-plain tbody td{border-bottom-color:rgb(228, 228, 230)}.duet-table-flattened.duet-table-fixed tbody:first-of-type th,.duet-table-flattened.duet-table-minimal tbody:first-of-type th,.duet-table-flattened.duet-table-plain tbody:first-of-type th{padding-top:0 !important}.duet-table-flattened.duet-table-fixed td,.duet-table-flattened.duet-table-minimal td,.duet-table-flattened.duet-table-plain td,.duet-table-flattened.duet-table-fixed tbody th,.duet-table-flattened.duet-table-minimal tbody th,.duet-table-flattened.duet-table-plain tbody th{border-bottom:0}.duet-table-flattened.duet-table-fixed tr,.duet-table-flattened.duet-table-minimal tr,.duet-table-flattened.duet-table-plain tr{padding:20px 0 !important}.duet-table-flattened.duet-table-fixed tbody th,.duet-table-flattened.duet-table-minimal tbody th,.duet-table-flattened.duet-table-plain tbody th{padding-top:20px !important}.duet-table-flattened.duet-table-fixed tfoot td,.duet-table-flattened.duet-table-minimal tfoot td,.duet-table-flattened.duet-table-plain tfoot td{margin-bottom:4px !important}.duet-table-flattened.duet-table-fixed tbody:not(:only-of-type) tr:first-child,.duet-table-flattened.duet-table-minimal tbody:not(:only-of-type) tr:first-child,.duet-table-flattened.duet-table-plain tbody:not(:only-of-type) tr:first-child{border-bottom:0}.duet-table-plain.duet-table-flattened tbody tr{border-bottom:1px solid rgb(225, 227, 230)}.duet-table-plain.duet-table-flattened.duet-theme-turva tbody tr{border-bottom-color:rgb(228, 228, 230)}.duet-table-minimal tbody tr,.duet-table-minimal tbody tr td{vertical-align:top;border-bottom:0 none}.duet-table-minimal tbody tr:last-of-type,.duet-table-minimal tbody tr:last-of-type td{border-bottom:1px solid rgb(225, 227, 230)}.duet-table-minimal.duet-table-flattened tbody tr,.duet-table-minimal.duet-table-flattened tbody tr td{border-bottom:0 none}.duet-table-minimal.duet-table-flattened tbody tr td[data-heading]::before{display:none}.duet-table-minimal.duet-table-flattened tfoot{border-top:1px solid rgb(225, 227, 230)}.duet-table-minimal.duet-table-flattened.duet-theme-turva tfoot{border-top-color:rgb(228, 228, 230)}.duet-table-fixed table{table-layout:fixed}.duet-table-fixed tbody tr,.duet-table-fixed tbody tr td,.duet-table-fixed tbody tr td:first-child{padding:4px !important;vertical-align:text-bottom;border-bottom:0 none}.duet-table-fixed thead{display:none}.duet-table-fixed tbody tr,.duet-table-fixed tbody tr td{border-bottom:0 none}.duet-table-fixed:not(.duet-table-flattened) tfoot{border-top:1px solid rgb(225, 227, 230)}.duet-table-fixed:not(.duet-table-flattened).duet-theme-turva tfoot{border-top-color:rgb(228, 228, 230)}.duet-table-scrollable{position:relative;width:100%;overflow-x:auto;background:linear-gradient(90deg, #fff 0%, rgba(255, 255, 255, 0)), linear-gradient(-90deg, #fff 0%, rgba(255, 255, 255, 0)) 100% 0, radial-gradient(farthest-side at 0% 50%, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0)), radial-gradient(farthest-side at 100% 50%, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0)) 100% 0%;background-repeat:no-repeat;background-attachment:local, local, scroll, scroll;background-size:100px 100%, 100px 100%, 12px 100%, 12px 100%}.duet-table-selected-column{background:rgba(0, 119, 179, 0.08)}.duet-theme-turva .duet-table-selected-column{background:rgba(68, 68, 69, 0.08)}.duet-table-sortable tbody tr td:first-child,.duet-table-sortable thead tr th:first-child{padding:20px}.duet-table-sortable:not(.duet-table-flattened) tfoot{border-top:1px solid rgb(225, 227, 230)}.duet-table-sortable:not(.duet-table-flattened).duet-theme-turva tfoot{border-top-color:rgb(228, 228, 230)}.duet-table-actions table{table-layout:auto}.duet-table-actions thead th:last-child{width:1px;white-space:nowrap}.duet-editable-table-table.duet-table-flattened tr{display:grid;grid-template-columns:repeat(2, 1fr);grid-auto-rows:auto;gap:10px}.duet-editable-table-table.duet-table-flattened tr.duet-table-action-row td:last-child::before{padding:0;content:""}.duet-editable-table-table.duet-table-flattened td{grid-column:1/2}.duet-editable-table-table.duet-table-flattened td:first-child{grid-row:1;grid-column:1}.duet-editable-table-table.duet-table-flattened td:last-child{grid-row:1;grid-column:2}';var S={none:0,"with-links":parseFloat(m)*16,"without-links":parseFloat(g)*16};var L=t("duet_table",function(){function t(t){var e=this;i(this,t);this.headingSelector="thead tr > :not(*.duet-editable-table-actions-menu)";this.handleMediaQueryChange=function(t){e.matchesBreakpoint=v.includes(e.breakpoint)?!t.matches:t.matches};this.matchesBreakpoint=true;this.language=h();this.theme=undefined;this.margin="auto";this.variation="striped";this.sticky=false;this.stickyDistance="with-links";this.breakpoint="small";this.hideHeadVisually=false}t.prototype.watchLanguageStateHandler=function(t,e){var i=this;if(t!==e){setTimeout((function(){return i.copyHeadingsToCells()}),50)}};t.prototype.connectedCallback=function(){var t=this;var e=this.breakpoint==="none"||this.breakpoint==="none-scrollable"?"all":y[this.breakpoint];this.mq=matchMedia(e);this.mq.addEventListener("change",s(this.handleMediaQueryChange,50));this.handleMediaQueryChange(this.mq);this.observer=new MutationObserver((function(){return s(t.copyHeadingsToCells(),50)}));this.observer.observe(this.element,{childList:true,subtree:true})};t.prototype.componentWillLoad=function(){o(this);this.copyHeadingsToCells();if(this.sticky&&this.breakpoint==="none-scrollable"){console.warn('[DUET WARNING]: sticky and breakpoint="none-scrollable" are incompatible. Scrollable takes precedence')}if(this.sticky){var t=S[this.stickyDistance];var e=this.element.querySelectorAll(this.headingSelector);e.forEach((function(e){return e.style.top="".concat(t,"px")}))}};t.prototype.componentDidLoad=function(){this.observer?this.observer.takeRecords():null;f(this)};t.prototype.disconnectedCallback=function(){this.observer.disconnect();this.observer=null;this.mq.removeListener(this.handleMediaQueryChange);this.mq=null;this.matchesBreakpoint=true;b(this)};t.prototype.copyHeadingsToCells=function(){var t=this.element.querySelectorAll(this.headingSelector);var e=this.element.querySelectorAll("tbody tr");var i=Array.from(t).map((function(t){return t.textContent.trim()}));e.forEach((function(t){t.querySelectorAll("td").forEach((function(t,e){if(i[e]){var a=t.querySelector(".duet-table-cell-heading");if(!a||a.textContent!==i[e]){a===null||a===void 0?void 0:a.remove();var n=document.createElement("span");n.textContent=i[e];n.classList.add("duet-table-cell-heading");n.setAttribute("aria-hidden","true");n.inert=true;t.prepend(n)}}}))}))};t.prototype.render=function(){var t;return e(n,{class:(t={},t["duet-table-".concat(this.variation)]=true,t["duet-table-flattened"]=!this.matchesBreakpoint,t["duet-table-sticky"]=this.matchesBreakpoint&&this.sticky,t["duet-table-scrollable"]=this.breakpoint==="none-scrollable",t["duet-m-0"]=this.margin==="none",t["duet-theme-turva"]=this.theme==="turva",t["duet-table-hide-head-visually"]=this.hideHeadVisually,t)},e("slot",null))};Object.defineProperty(t.prototype,"element",{get:function(){return r(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{language:["watchLanguageStateHandler"]}},enumerable:false,configurable:true});return t}());L.style=E;var z=[{type:"default",system_message:"unknown error",message:{fi:"Tapahtui tuntematon virhe, ole hyvä ja yritä uudelleen.",sv:"Ett okänt fel uppstod, försök igen.",en:"An unknown error occured, please try again."}},{type:"400",system_message:"Bad Request: The server could not understand the request due to invalid syntax.",message:{fi:"Tiedostoa ei hyväksytty.",sv:"Servern avvisade din fil.",en:"The server rejected your file."}},{type:"401",system_message:"Not Authenticated: The client must authenticate itself to get the requested response...",message:{fi:"Vain kirjautunut käyttäjä voi lähettää tiedostoja.",sv:"Du måste vara inloggad för att ladda upp filer.",en:"You need to be logged in to upload files."}},{type:"403",system_message:"No Access: The client does not have access rights to the content.",message:{fi:"Ei oikeuksia lähettää tiedostoja.",sv:"Du har inte rätt åtkomsträttigheter för att ladda upp filer.",en:"You do not have the correct access rights to upload files."}},{type:"413",system_message:"Payload too large",message:{fi:"Tiedosto oli liian vastaanotettavaksi.",sv:"Filen var för stor för servern att hantera.",en:"The file was to large for the server to handle."}},{type:"415",system_message:"Unsupported media type",message:{fi:"Tiedoston tyyppi oli väärä.",sv:"Servern avvisade filen eftersom den hade fel typ.",en:"The server rejected the file because it had the wrong type."}},{type:"429",system_message:"Too many request from same address",message:{fi:"Liian monta yritystä, ole hyvä ja yritä myöhemmin uudelleen.",sv:"Servern har fått många förfrågningar från dig, försök igen senare.",en:"The server has received to many request from you, please try again later."}},{type:"500",system_message:"Internal Server Error",message:{fi:"Palvelin ilmoitti tuntemattomasta virheestä ja lataus epäonnistui.",sv:"Servern rapporterade ett okänt fel och uppladdningen misslyckades.",en:"The server reported an unknown error and the upload failed."}},{type:"duet-upload-100",system_message:"File extension not allowed",message:{fi:"Tiedoston tyyppi ei ole sallittu.",sv:"Du kan inte ladda upp filer av den type.",en:"You cannot upload files with that extension."}},{type:"duet-upload-001",system_message:"File transfer failed",message:{fi:"Tiedoston lähetys keskeytyi, ole hyvä ja yritä uudelleen.",sv:"Din anslutning till servern avbröts, försök igen.",en:"Your connection to the server was interrupted, try again."}},{type:"duet-upload-101",system_message:"File mimetype not allowed",message:{fi:"Tiedoston tyyppi ei ole sallittu.",sv:"Du kan inte ladda upp filer av den typ.",en:"You cannot upload files of that type."}},{type:"duet-upload-201",system_message:"File is too large",message:{fi:"Tiedosto on liian iso.",sv:"Filen är större än tillåtet.",en:"The file is larger than permitted."}},{type:"duet-upload-202",system_message:"The combined size of all files is too large",message:{fi:"Tiedostojen yhteenlaskettu koko on liian iso.",sv:"Du har nått den maximala kombinerade filstorleken.",en:"You have reached the maximum combined filesize."}},{type:"duet-upload-203",system_message:"Files to upload exceed total byte size limit",message:{fi:"Yritit lisätä tiedostoja, jotka ylittäisivät suurimman sallitun yhteenlasketun koon.",sv:"Du försökte lägga till filer som skulle överskrida den maximala kombinerade storleken.",en:"You tried to add files that would exceed the maximum combined size."}},{type:"duet-upload-301",system_message:"The maximum file limit has been reached",message:{fi:"Liitteiden maksimimäärä saavutettu.",sv:"Maximalt antal bilagor har uppnåtts.",en:"Maximum number of attachments reached."}},{type:"duet-upload-302",system_message:"Files to upload exceeds limits",message:{fi:"Et voi lähettää enempää kuin enimmäismäärän liitteitä.",sv:"Du kan inte ladda upp fler än det maximala antalet bilagor.",en:"You can't upload more than maximum number of attachments."}}];var A={fi:"Liiteluettelo",sv:"Lista över bilagor",en:"Attachments list"};var F=function(t){var i=t.label,a=t.categoryLabel;return e("div",{class:"items-header",tabindex:"-1","aria-label":p(A)},a&&e("duet-heading",{class:"category-header",border:"solid",color:"gray-darker",level:"h3","visual-level":"h6",weight:"semibold",margin:"none","aria-hidden":"true"},p(a)),e("duet-heading",{class:{"filename-header":true,"no-category":!a},border:"solid",color:"gray-darker",level:"h3","visual-level":"h6",weight:"semibold",margin:"none","aria-hidden":"true"},p(i)))};var M=function(t,e){if(!e){return true}var i=t.split(".");var a=e.split(",");var n=i[i.length-1];return a.includes(n)};var U=function(t,e){if(!e||!t){return true}var i=e.split(",");var a=false;i.forEach((function(e){var i=e.split("/");var n=t.split("/");if(i[0]===n[0]&&(i[1]===n[1]||i[1]==="*")){a=true}}));return a};var D=function(t,e){if(!e||!t){return true}return e>=t};var C=function(t,e,i){var a=e.allowedMimetypes,n=e.allowedExtensions,r=e.maxBytes;var d=false;var o=w("default",i);if(t){var l=t.name,s=t.type,u=t.size;var h=U(s,a);var f=n==="all"||n===""||n===" "||n===undefined?true:M(l.toLowerCase(),n);var b=D(u,r);if(!h){o=w("duet-upload-101",i)}if(!f){o=w("duet-upload-100",i)}if(!b){o=w("duet-upload-201",i)}d=h&&f&&b}else{d=false}return{valid:d,errorMessage:d?undefined:p(o.message),errorSystem:d?undefined:o.system_message,errorType:d?undefined:o.type}};var P=function(t,e){var i=0;if(e){t.forEach((function(t){if(t.valid&&t.size){i+=t.size}}));if(i>=e){return true}}return false};var I=function(t,e){var i=0;if(e){t.forEach((function(t){if(t.valid){i++}}));if(i>=e){return true}}return false};var O=function(t,e,i){if(t+e>i){return true}return false};var W=function(t,e,i){var a=0;if(i){t.forEach((function(t){if(t.valid&&t.size){a+=t.size}}));e.forEach((function(t){if(t.size){a+=t.size}}));if(a>=i){return true}}return false};var R=function(t){var e=t.payload,i=t.options,a=t.onFailure,n=t.onSuccess,r=t.onProgress;var d=i.type,o=d===void 0?"POST":d,l=i.xhr,s=i.uri,u=i.argument,h=u===void 0?null:u,f=i.headers,b=f===void 0?null:f;l.open(o,"".concat(s).concat(h||""),true);var p=e.data,c=e.name;if(b){Object.keys(b).forEach((function(t){l.setRequestHeader(t,b[t])}))}if(o==="POST"){l.onreadystatechange=function(){if(l.readyState===XMLHttpRequest.DONE&&l.status>=200&&l.status<300){n(l,c,l.status)}if(l.readyState===XMLHttpRequest.DONE&&l.status>=300&&l.status<999){a(l,c,l.status)}};r(c)}l.send(p);return l};var N="*,*::after,*::before{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}:host{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}::slotted([slot=header]){margin-bottom:16px}::slotted([slot=fileheader]){margin:16px 0 0 0}::slotted([slot=filefooter]){margin-top:16px}::slotted([slot=uploadfooter]){margin-top:20px}.duet-upload{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}.duet-upload-item-size{font-size:0.75rem;font-weight:400}.duet-upload-filelist{margin-bottom:25px}.duet-upload-filelist-empty{display:flex;align-items:center;justify-content:center;width:100%;height:75px;margin:0 auto;font-size:1rem;font-weight:400;background-color:rgb(245, 248, 250)}.duet-upload-filelist-empty-label{font-size:1rem;font-weight:400}.duet-upload-editable-table-header-hidden{display:none}.duet-upload-editable-table tbody .duet-upload-editable-table-data{padding:0 !important;border:0}.duet-upload-editable-table duet-editable-table tfoot,.duet-upload-editable-table duet-editable-table thead{display:none}.duet-upload-editable-table duet-editable-table .duet-editable-table-content{padding-right:0 !important;padding-left:0 !important}.duet-upload-editable-table duet-editable-table duet-table .duet-table-action-row td{padding:1rem 0 !important}.duet-upload-editable-table duet-editable-table duet-table .duet-table-action-row td:last-child{padding-right:0 !important}.duet-upload-editable-table duet-editable-table .duet-editable-table-row-inprogress,.duet-upload-editable-table duet-editable-table .duet-editable-table-row-pending{position:relative}.duet-upload-editable-table duet-editable-table .duet-editable-table-row-inprogress duet-progress,.duet-upload-editable-table duet-editable-table .duet-editable-table-row-pending duet-progress{position:absolute;bottom:0;width:100%}.duet-upload-editable-table duet-editable-table .duet-editable-table-row-inprogress duet-action-button::part(button),.duet-upload-editable-table duet-editable-table .duet-editable-table-row-pending duet-action-button::part(button){border:0}duet-paragraph::part(duet-paragraph){word-break:break-word}duet-editable-table tfoot{display:none}.upload-bottom-caption{margin-top:12px;margin-bottom:16px;line-height:1.4rem}.items-header{display:none;flex-direction:row;margin-bottom:0}@media (min-width: 36em){.items-header{display:flex}}.items-header:not(:last-child),.items-header:not(:first-child){margin-top:12px}.items-header .category-header{width:35%}.items-header .filename-header{width:65%}.items-header .filename-header.no-category{width:100%}.upload-item-row{display:flex;flex-direction:column;gap:16px;align-content:center;align-items:center;padding:16px 0 16px 0;border-bottom:1px solid rgb(225, 227, 230)}@media (min-width: 36em){.upload-item-row{flex-direction:row;gap:10px}}.upload-item-row .item-categories{width:100%}@media (min-width: 36em){.upload-item-row .item-categories{width:35%}}.upload-item-row .item-name{position:relative;bottom:2px;width:100%;text-align:left}@media (min-width: 36em){.upload-item-row .item-name{width:50%}.upload-item-row .item-name.no-category{width:85%}}.upload-item-row .item-categories .heading,.upload-item-row .item-name .heading{display:block}@media (min-width: 36em){.upload-item-row .item-categories .heading,.upload-item-row .item-name .heading{display:none}}.upload-item-row .item-actions{width:100%;margin-left:-8px;text-align:left}@media (min-width: 36em){.upload-item-row .item-actions{width:15%;padding-top:0;margin-left:auto;text-align:right}}.upload-item-row .duet-upload-item-name duet-icon{position:relative;top:4px}.upload-item-row .duet-upload-item-name duet-progress{display:block;margin-top:16px}";var Y=t("duet_upload",function(){function t(t){var n=this;i(this,t);this.duetChange=a(this,"duetChange",3);this.duetBlur=a(this,"duetBlur",7);this.duetFocus=a(this,"duetFocus",7);this.duetReady=a(this,"duetReady",7);this.duetDone=a(this,"duetDone",3);this.duetState=a(this,"duetState",3);this.duetDelete=a(this,"duetDelete",3);this.duetCancel=a(this,"duetCancel",3);this.duetProgress=a(this,"duetProgress",3);this.duetUpload=a(this,"duetUpload",3);this.linkClick=a(this,"linkClick",3);this.buttonId=x("DuetButton");this.labelId=x("DuetLabel");this.uploadId=x("DuetUpload");this.filesInProgress=new Map;this.fileMaxReached=false;this.bytesMaxReached=false;this.filesToUploadExceedsLimit=false;this.filesToUploadTotalSizeIsAboveMax=false;this.internalStatusMessageLabel=undefined;this.itemRefs=new Map;this.DefaultGroups={inprogress:"inprogress",success:"success",pending:"pending",failure:"failure"};this.kick=s((function(){n.tick=Date.now()}),30);this.categoryLabel={en:"Category",sv:"Filtyp",fi:"Tiedostotyyppi"};this.listenForActionEvents=function(){n.element.addEventListener("duetActionEvent",(function(t){var e=t.detail;var i=e.action,a=e.id,r=e.originalEvent;switch(i){case"delete":n.onDelete(a,r);break;case"cancel":n.onCancel(a,r);break}}))};this.verifyValidity=function(){var t=n.getFilesAsArray(),e=t.invalid,i=t.valid;var a=n.valid;n.valid=e.length===0&&i.length!==0;if(n.valid!==a){n.duetState.emit({originalEvent:undefined,data:{valid:n.valid,from:"componentWillRender"},component:"duet-upload"})}};this.getGroupFromItemData=function(t){if(t.valid&&t.progress===100){return n.DefaultGroups.success}else if(t.progress>0&&t.progress!==100){return n.DefaultGroups.inprogress}else if(!t.valid){return n.DefaultGroups.failure}else if(t.pending){return n.DefaultGroups.pending}else if(t.group){return t.group}else{return"none"}};this.mapFilesToUploadItems=function(t,i,a,r){if(i===n.DefaultGroups.success){return e("duet-upload-item",{theme:n.theme,actions:n.getActions(i,r),type:"success",data:t,showLinks:n.showLinks,linkClickEvent:n.emitEvent?n.linkClick:undefined,categoryLabel:n.categoryLabel,label:n.uploadedItemsHeaderLabel,showCategory:a,ref:function(e){n.itemRefs.set(t.uid,e)}})}else if(i===n.DefaultGroups.inprogress){return e("duet-upload-item",{theme:n.theme,actions:n.getActions(i,r),type:"inprogress",data:t,showLinks:n.showLinks,categoryLabel:n.categoryLabel,label:n.uploadedItemsHeaderLabel,showCategory:a,ref:function(e){n.itemRefs.set(t.uid,e)}})}else if(i===n.DefaultGroups.pending){return e("duet-upload-item",{theme:n.theme,actions:n.getActions(i,r),type:"pending",data:t,showLinks:n.showLinks,categoryLabel:n.categoryLabel,label:n.uploadedItemsHeaderLabel,showCategory:a,ref:function(e){n.itemRefs.set(t.uid,e)}})}else if(i===n.DefaultGroups.failure){return e("duet-upload-item",{theme:n.theme,actions:n.getActions(i,r),type:"failure",data:t,showLinks:n.showLinks,errorCodes:n.errorCodes,categoryLabel:n.categoryLabel,label:n.uploadedItemsHeaderLabel,showCategory:a,ref:function(e){n.itemRefs.set(t.uid,e)}})}else if(t.group){return t.html}else{return"none"}};this.genHashName=function(){return Date.now().toString(36)+Math.random()};this.updateValueInMap=function(t,e,i,a){if(a===void 0){a=true}try{var r=n.files.get(t);r[e]=i;n.files.set(t,r);if(n.external&&e!=="url"){n.trackProgress(t,e==="uploaded")}}catch(t){}if(a){n.kick()}};this.updateProgress=function(t,e){var i=function(i){n.updateValueInMap(e,"progress",i);n.onProgress(e,i,t)};if(t.lengthComputable){var a=t.loaded/t.total*100;i(a)}else{console.log("cant read progress")}};this.trackProgress=function(t,e){if(e===void 0){e=false}if(e){n.filesInProgress.delete(t)}else{n.filesInProgress.set(t,"inprogress")}if(n.filesInProgress.size===0){n.onDone()}};this.getFilesAsArray=function(){var t=[];var e=[];n.files.forEach((function(i){if(i.valid&&!i.deleted){t.push(i)}else if(!i.valid&&!i.deleted){e.push(i)}}));return{valid:t,invalid:e}};this.resetFormFields=function(){n.nativeInput.value=""};this.startUpload=function(t,e){if(e===void 0){e=undefined}return __awaiter(n,void 0,void 0,(function(){var i,a,n;return __generator(this,(function(r){i=this.validateTotals(),a=i.bytesMaxReached,n=i.fileMaxReached;if(a||n){this.kick();return[2]}this.metaData=e;this.nativeInput.click();this.onUpload(t,e);t.stopPropagation();t.preventDefault();return[2]}))}))};this.transferComplete=function(t){n.updateValueInMap(t,"progress",100,false);n.trackProgress(t,true)};this.transferDone=function(t,e,i){n.updateValueInMap(e,"status",i,false);n.updateValueInMap(e,"uploaded",true,false);try{var a=JSON.parse(t.response);n.updateValueInMap(e,"url",a.url)}catch(t){n.updateValueInMap(e,"url",null);console.error("Server did not respond with expected response {url: string}")}return};this.transferDoneWithFailure=function(t,e,i){try{var a=JSON.parse(t.response).error;n.updateValueInMap(e,"error",{message:a.message,type:a.type},false)}catch(t){console.error("Server did not respond with expected response error:{message: string, type: int}");n.updateValueInMap(e,"error",{type:i},false)}n.updateValueInMap(e,"valid",false,true)};this.transferFailed=function(t){n.updateValueInMap(t,"error",k("duet-upload-001",n.errorCodes))};this.transferCanceled=function(t){n.files.delete(t);n.validateTotals(t);n.kick()};this.validateTotals=function(t){var e=P(n.files,n.maxBytesTotal);var i=I(n.files,n.maxFiles);if(e&&t){n.updateValueInMap(t,"error",k("duet-upload-202",n.errorCodes),false)}if(i&&t){n.updateValueInMap(t,"error",k("duet-upload-301",n.errorCodes),false)}n.bytesMaxReached=e;n.fileMaxReached=i;return{bytesMaxReached:e,fileMaxReached:i}};this.uploadFile=function(t,e,i){if(e===void 0){e=false}return __awaiter(n,void 0,void 0,(function(){var a,n,r;return __generator(this,(function(d){switch(d.label){case 0:if(!e&&this.deferUpload){this.updateValueInMap(t.item.name,"pending",true,false);this.updateValueInMap(t.item.name,"group","pending",true)}else if(e){this.updateValueInMap(t.item.name,"pending",false,false);this.updateValueInMap(t.item.name,"group",undefined,true)}d.label=1;case 1:d.trys.push([1,4,,5]);if(!(!this.deferUpload||e))return[3,3];a=new FormData;a.append("file",t.item);if(i){a.append("key",i)}a.append("uid",t.uid);a.append("name",t.item.name);a.append("metadata",JSON.stringify({uid:t.uid,url:this.uri,size:t.item.size,meta:t.meta}));n=t;return[4,this.makeXHRPostRequest(a)];case 2:n.xhr=d.sent();d.label=3;case 3:return[3,5];case 4:r=d.sent();this.updateValueInMap(t.item.name,"valid",false,false);return[3,5];case 5:return[2]}}))}))};this.uploadPendingFiles=function(){for(var t=0,e=Array.from(n.files.entries());t<e.length;t++){var i=e[t],a=i[0],r=i[1];if(r.group==="pending"&&r.pending===true){n.uploadFile(r,true,a)}}};this.getItemFromUID=function(t){for(var e=0,i=Array.from(n.files.entries());e<i.length;e++){var a=i[e],r=a[0],d=a[1];if(d.uid===t){return{value:d,key:r}}}return null};this.handleExternalUploadButton=function(t,e){if(n.externalUploadButton){if(t||e){n.externalUploadButton.disabled=true}else{n.externalUploadButton.disabled=false}}};this.onDelete=function(t,e){var i=n.getItemFromUID(t);var a=i.key;var r=n.files.get(a);n.files.delete(a);var d=n.validateTotals(),o=d.bytesMaxReached,l=d.fileMaxReached;n.handleExternalUploadButton(o,l);n.kick();n.duetDelete.emit({originalEvent:e,data:{deletion:r},component:"duet-upload"});if(!n.external&&!r.pending){n.makeXHRDeleteRequest(r)}n.resetFormFields()};this.onCancel=function(t,e){var i=n.getItemFromUID(t).key;var a=n.files.get(i);n.files.delete(i);var r=n.validateTotals(),d=r.bytesMaxReached,o=r.fileMaxReached;n.handleExternalUploadButton(d,o);if(!n.external){var l=a.xhr;if(l){l.abort()}}n.kick();n.resetFormFields();n.duetCancel.emit({originalEvent:e,data:{cancelled:a},component:"duet-upload"})};this.onUpload=function(t,e){n.duetUpload.emit({originalEvent:t,metaData:e,component:"duet-upload"})};this.onBlur=function(t){n.duetBlur.emit({originalEvent:t,component:"duet-upload"})};this.onProgress=function(t,e,i){n.duetChange.emit({originalEvent:i,data:{key:t,percentComplete:e},component:"duet-upload"})};this.onFocus=function(t){n.duetFocus.emit({originalEvent:t,component:"duet-upload"})};this.onReady=function(){n.duetReady.emit({component:"duet-upload"})};this.onDone=function(){n.duetDone.emit({component:"duet-upload",data:{files:n.files}})};this.filterMap=function(){var t=Array.from(n.files.values());var e=[];var i=[];var a=[];var r=[];var d=false;t.forEach((function(t){var o=n.getGroupFromItemData(t);if(t.meta&&!!t.meta.badges){d=true}if(o===n.DefaultGroups.success){r.push({uid:t.uid,data:t})}else if(o===n.DefaultGroups.inprogress){e.push({uid:t.uid,data:t})}else if(o===n.DefaultGroups.pending){a.push({uid:t.uid,data:t})}else if(o===n.DefaultGroups.failure){i.push({uid:t.uid,data:t})}else if(t.group){e.push({uid:t.uid,data:t})}}));return{pending:a,failure:i,success:r,inprogress:e,hasCategory:d}};this.getActions=function(t,e){return e.filter((function(e){return e.map.includes(t)}))};this.renderUploadedItems=function(){n.itemRefs.clear();var t=n.filterMap();var i=t.hasCategory;var a=n.hideCancelButton?n.actions.filter((function(t){return t.name!=="cancel"})):n.actions;var r=n.groups.map((function(r){var o=t[r.id];if(!(o===null||o===void 0?void 0:o.length)){return}return e(d,null,!n.hideGroups&&e(F,{categoryLabel:i?n.categoryLabel:undefined,label:r.label}),o.map((function(t){return n.mapFilesToUploadItems(t.data,r.id,i,a)})))}));return e(d,null,n.showUploadedItemsHeader&&e(F,{categoryLabel:i?n.categoryLabel:undefined,label:n.uploadedItemsHeaderLabel}),r)};this.tick=Date.now();this.accessibleActiveDescendant=undefined;this.accessibleDescribedBy=undefined;this.accessibleControls=undefined;this.accessibleOwns=undefined;this.external=false;this.middleware=null;this.deferUpload=false;this.hideButton=false;this.actions=[{icon:"action-delete",color:"color-danger",size:"x-small",background:"gray-lightest",name:"delete",map:["success","failure"],label:{fi:"Poista tiedosto",en:"Delete the file",sv:"Ta bort filen"}},{icon:"navigation-close",color:"primary",size:"x-small",background:"gray-lightest",name:"cancel",map:["inprogress","pending"],label:{fi:"Keskeytä lähetys",en:"Cancel the upload",sv:"Stop överföringen"}}];this.uri=undefined;this.showLinks=false;this.caption=undefined;this.statusLabelDefaults={fi:{inProgress:"Lähetetään {filesUploaded}, yhteensä lähetettävänä {filesTotal}.",inProgressWithErrors:"Lähetetään {filesInProgress}, lähetetty {filesUploaded}, yhteensä lähetettävänä {filesTotal}, {filesWithErrors} epäonnistui",done:"Lähetys valmis, {filesTotal} lisätty onnistuneesti",doneWithErrors:"Lähetys valmis, {filesUploaded} lisätty onnistuneesti, {filesWithErrors} epäonnistui",files:"tiedostoa",file:"tiedosto"},sv:{inProgress:"Laddar upp {filesUploaded} av {filesTotal}",inProgressWithErrors:"Laddar upp {filesInProgress}, {filesUploaded} uppladdad av {filesTotal}, {filesWithErrors} misslyckades",done:"Uppladdningen slutförd, {filesTotal} har lagts till",doneWithErrors:"Uppladdningen slutförd, {filesUploaded} har lagts till, {filesWithErrors} misslyckades",files:"filer",file:"fil"},en:{inProgress:"Uploading {filesUploaded} of {filesTotal}",inProgressWithErrors:"Uploading {filesInProgress}, {filesUploaded} uploaded of {filesTotal}, {filesWithErrors} failed",done:"Upload completed, {filesTotal} added successfully",doneWithErrors:"Upload completed, {filesUploaded} added successfully, {filesWithErrors} failed.",files:"files",file:"file"}};this.statusMessageLabel=p(this.statusLabelDefaults);this.buttonLabelDefaults={fi:"Lisää liite",sv:"Lägg till en bilaga",en:"Add an attachment"};this.buttonLabel=p(this.buttonLabelDefaults);this.accessibleButtonLabel=undefined;this.theme="";this.disabled=false;this.identifier=undefined;this.margin="auto";this.required=false;this.alignment="middle";this.hideGroups=false;this.files=new Map;this.valid=!this.required;this.labelDefaults={fi:"Lisää liite",sv:"Lägg till en bilaga",en:"Add attachments"};this.label=p(this.labelDefaults);this.descriptionDefaults={en:"You may attach the following filetypes: {filetypes} - as well as the most common video files. You can upload {maxbytestotal} of files at a time, and add up to {maxfiles} attachments at a time each no larger than {maxbytes}.",sv:"Du kan bifoga följande filtyper: {filetypes} - samt de vanligaste videofilerna. Du kan ladda upp {maxbytestotal} av filer åt gången, och lägga till upp till {maxfiles} bilagor åt gången varje inte större än {maxbytes}.",fi:"Voit liittää seuraavat tiedostotyypit: {filetypes} - sekä yleisimmät videotiedostot. Voit lähettää {maxbytestotal} tiedostoa kerrallaan, ja lisätä enintään {maxfiles} liitettä kerrallaan, jokainen enintään {maxbytes} kokoisena."};this.description=p(this.descriptionDefaults);this.fileListEmptyDefaults={fi:"Ei vielä lisättyjä tiedostoja.",sv:"Inga filer har lagts till ännu.",en:"No files added yet."};this.fileListEmpty=p(this.fileListEmptyDefaults);this.error="";this.errorCodes=z;this.name=undefined;this.maxBytes=2e8;this.maxBytesTotal=undefined;this.maxFiles=99;this.allowedExtensions="all";this.allowedMimetypes="";this.multiple=true;this.limitSelection=false;this.hideCancelButton=false;this.value=undefined;this.externalUploadButtonId=undefined;this.captionOnBottom=false;this.showUploadedItemsHeader=false;this.uploadedItemsHeaderLabel={fi:"Ladattu tiedosto",sv:"Lägg till en bilaga",en:"Uploaded file"};this.headerHeadingLevel="h3";this.hideHeader=false;this.emitEvent=false;this.groups=[{id:this.DefaultGroups.success,label:{fi:"Valmiit tiedostot",sv:"Files success",en:"Files success"}},{id:this.DefaultGroups.failure,label:{fi:"Tiedostot, joissa on virheitä",sv:"Filer med fel",en:"Files with errors"}},{id:this.DefaultGroups.inprogress,label:{fi:"Kesken olevat tiedostot",sv:"Filer inprogress",en:"Files inprogress"}},{id:this.DefaultGroups.pending,label:{en:"Files to upload",sv:"Filer att ladda",fi:"Ladattavat tiedostot"}}]}t.prototype.watchValidHandler=function(t,e){if(t!==e){this.kick()}};t.prototype.componentWillLoad=function(){if(typeof this.statusMessageLabel==="string"){this.internalStatusMessageLabel=c(this.groups)}else{this.internalStatusMessageLabel=this.statusMessageLabel}o(this);this.listenForActionEvents();this.onReady();this.externalUploadButton=document.querySelector("#".concat(this.externalUploadButtonId))};t.prototype.componentWillRender=function(){this.verifyValidity()};t.prototype.setFocus=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){if(this.nativeInput){this.nativeInput.focus(t)}return[2]}))}))};t.prototype.upload=function(t){if(t===void 0){t=undefined}return __awaiter(this,void 0,void 0,(function(){var e,i,a;return __generator(this,(function(n){e=this.validateTotals(),i=e.bytesMaxReached,a=e.fileMaxReached;if(i||a){this.handleExternalUploadButton(i,a);this.kick();return[2]}this.metaData=t;this.nativeInput.click();return[2]}))}))};t.prototype.uploadPending=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.uploadPendingFiles();return[2]}))}))};t.prototype.refresh=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:this.kick();return[4,this.setFocus()];case 1:t.sent();return[2]}}))}))};t.prototype.getFiles=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){if(!this.files||this.files.size===0){return[2,false]}return[2,this.getFilesAsArray()]}))}))};t.prototype.updateValue=function(t,e,i){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(a){this.updateValueInMap(t,e,i);return[2]}))}))};t.prototype.focusActionButton=function(t){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(i){switch(i.label){case 0:return[4,(e=this.itemRefs.get(t))===null||e===void 0?void 0:e.focusActionButton()];case 1:i.sent();return[2]}}))}))};t.prototype.render=function(){var t=this;var i=this.identifier||this.uploadId;var a=Math.round((this.maxBytesTotal?this.maxBytesTotal:this.maxBytes*this.maxFiles)/1024/1024);var r=Math.round(this.maxBytes/1024/1024);var o=this.description.replace(/{maxfiles}/g,this.maxFiles.toString());o=o.replace(/{maxbytes}/g,"".concat(r.toString()," MB"));o=o.replace(/{maxbytestotal}/g,"".concat(a.toString()," MB"));o=o.replace(/{filetypes}/g,this.allowedExtensions.split(",").join(", "));if(this.externalUploadButton){this.externalUploadButton.accessibleLabel=o}return e(n,{class:{"duet-m-0":this.margin==="none"}},e("duet-fieldset",{"label-heading-level":this.headerHeadingLevel,"label-hidden":this.hideHeader,label:this.label,caption:!this.captionOnBottom?o:undefined},e("slot",{name:"header"}),!this.files.size&&e("duet-empty-state",{id:this.labelId,part:this.identifier?"".concat(this.identifier,"-empty-state"):"duet-upload-empty-state",icon:"messaging-attachment"},e("duet-paragraph",{margin:"none"},this.fileListEmpty)),!!this.files.size&&e("slot",{name:"fileheader"}),!!this.files.size&&e("duet-upload-aria-status",{invalid:this.getFilesAsArray().invalid.length,valid:this.getFilesAsArray().valid.length,inprogress:this.filesInProgress.size,total:this.files.size,statusMessageLabel:this.internalStatusMessageLabel}),!!this.files.size&&this.renderUploadedItems(),!!this.files.size&&e("slot",{name:"filefooter"}),e("slot",{name:"uploadfooter"}),this.captionOnBottom&&e("duet-caption",{margin:"none",size:"small"},e("div",{class:"upload-bottom-caption"},o)),e("slot",{name:"afterfooter"}),!this.hideButton&&e(d,null,e("duet-spacer",{size:"large"}),e("duet-button",{id:this.buttonId,onClick:this.startUpload,"accessible-controls":i,disabled:this.fileMaxReached,"accessible-label":this.accessibleButtonLabel,"accessible-owns":i,size:"small",variation:"secondary",fixed:true,icon:"action-add-circle",part:this.identifier?"".concat(this.identifier,"-button-upload"):"duet-upload-button-upload"},this.buttonLabel)),(this.fileMaxReached||this.bytesMaxReached||this.filesToUploadExceedsLimit||this.filesToUploadTotalSizeIsAboveMax)&&e(d,null,e("duet-spacer",{size:"medium"}),e("duet-alert",{part:this.identifier?"".concat(this.identifier,"-error-notification"):"duet-upload-error-notification"},this.fileMaxReached&&k("duet-upload-301",this.errorCodes),this.bytesMaxReached&&k("duet-upload-202",this.errorCodes),this.filesToUploadExceedsLimit&&k("duet-upload-302",this.errorCodes),this.filesToUploadTotalSizeIsAboveMax&&k("duet-upload-203",this.errorCodes))),e("duet-visually-hidden",{"aria-hidden":"true"},e("input",{ref:function(e){t.nativeInput=e},accept:!this.limitSelection?undefined:"".concat(this.allowedMimetypes,",").concat(this.allowedExtensions),onBlur:this.onBlur,onFocus:this.onFocus,onChange:function(e){return t.onChange(e)},type:"file",class:{"duet-upload":true},disabled:this.disabled,"aria-hidden":"true",required:this.required,name:this.name,id:this.identifier,multiple:this.multiple,tabIndex:-1}))))};t.prototype.makeXHRPostRequest=function(t){var e=this;var i=new XMLHttpRequest;var a=t.get("name");i.upload.addEventListener("progress",(function(t){e.updateProgress(t,a)}));i.upload.addEventListener("load",(function(){e.transferComplete(a)}));i.upload.addEventListener("error",(function(){e.transferFailed(a)}));i.upload.addEventListener("abort",(function(){e.transferCanceled(a)}));var n={payload:{data:t,name:a},options:{type:"POST",uri:this.uri,xhr:i,argument:null,headers:undefined},onFailure:this.transferDoneWithFailure,onSuccess:this.transferDone,onProgress:this.trackProgress};if(this.middleware){n=this.middleware(n)}return R(n)};t.prototype.makeXHRDeleteRequest=function(t){var e=t.uid,i=t.item;var a=new XMLHttpRequest;var n={"x-fileuid":e,"x-filename":i.name};var r={payload:{data:null,name:name},options:{type:"DELETE",xhr:a,uri:this.uri,argument:"?key=".concat(e,"&name=").concat(i.name),headers:n},onFailure:this.transferDoneWithFailure,onSuccess:this.transferDone,onProgress:this.trackProgress};if(this.middleware){r=this.middleware(r)}return R(r)};t.prototype.onChange=function(t){return __awaiter(this,void 0,void 0,(function(){var e,i,a,n,r,d,o,l,s,u,h,f;return __generator(this,(function(b){switch(b.label){case 0:i=Array.from((e=this.nativeInput)===null||e===void 0?void 0:e.files);this.filesToUploadExceedsLimit=false;if(O(this.files.size,i.length,this.maxFiles)){this.filesToUploadExceedsLimit=true;this.kick();return[2]}this.filesToUploadTotalSizeIsAboveMax=false;if(W(this.files,i,this.maxBytesTotal)){this.filesToUploadTotalSizeIsAboveMax=true;this.kick();return[2]}if(!i)return[3,6];a=0,n=i;b.label=1;case 1:if(!(a<n.length))return[3,6];r=n[a];d=C(r,{maxBytes:this.maxBytes,allowedExtensions:this.allowedExtensions,allowedMimetypes:this.allowedMimetypes},this.errorCodes),o=d.valid,l=d.errorMessage,s=d.errorType,u=d.errorSystem;h=this.genHashName();f={uid:h,item:r,size:r.size,meta:this.metaData,uploaded:false,valid:o,error:{type:o?undefined:s,message:o?undefined:l,system_message:o?undefined:u},progress:0,deleted:false,xhr:false,url:false};this.files.set(r.name,f);if(!(o&&!this.external))return[3,3];return[4,this.uploadFile(f)];case 2:b.sent();return[3,4];case 3:if(o&&this.external){this.updateValueInMap(f.item.name,"pending",true,false);this.updateValueInMap(f.item.name,"group","pending",true)}else if(!o){this.updateValueInMap(r.name,"valid",false,true)}b.label=4;case 4:this.kick();b.label=5;case 5:a++;return[3,1];case 6:this.resetFormFields();this.metaData=undefined;this.duetChange.emit({originalEvent:t,data:{files:this.files},component:"duet-upload"});return[2]}}))}))};Object.defineProperty(t.prototype,"element",{get:function(){return r(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{valid:["watchValidHandler"]}},enumerable:false,configurable:true});return t}());Y.style=N}}}));