/*!
 * Built with Duet Design System
 */
class t{constructor(t,s){this.isActive=!1,this.element=t,this.target=s||document.body,this.teleportId=`${Math.random()}-${Date.now()}`.substring(2)}go(t=!1){const s=this.element.getAttribute("skip-teleport");null!==s&&"false"!==s||(this.element.dataset.reactPortal||(this.stub=document.createElement("template"),this.element.insertAdjacentElement("afterend",this.stub),this.target.appendChild(this.element)),t&&this._makeSiblingsInert(),this.deletionObserver=new MutationObserver(this._deletionObserverCallback.bind(this)),this.deletionObserver.observe(document.documentElement,{childList:!0,subtree:!0}),this.isActive=!0)}resume(t=0){const s=this.element.getAttribute("skip-teleport");null!==s&&"false"!==s||this.isActive&&(this.isActive=!1,t?setTimeout(this._resume.bind(this),t):this._resume())}_resume(){this.element.dataset.reactPortal||(this.stub.insertAdjacentElement("beforebegin",this.element),this.stub.remove()),this._removeInertFromSiblings(),this.deletionObserver.disconnect()}_remove(){var t,s;null===(t=this.element)||void 0===t||t.remove(),null===(s=this.stub)||void 0===s||s.remove(),this._removeInertFromSiblings(),this.deletionObserver.disconnect()}_makeSiblingsInert(){Array.from(this.target.children).forEach((t=>{t!==this.element&&(t.dataset.duetTeleportId=(t.dataset.duetTeleportId||"")+this.teleportId,t.inert=!0)}))}_removeInertFromSiblings(){Array.from(this.target.children).forEach((t=>{var s;(null===(s=t.dataset.duetTeleportId)||void 0===s?void 0:s.includes(this.teleportId))&&(t.dataset.duetTeleportId=t.dataset.duetTeleportId.replace(this.teleportId,""),""===t.dataset.duetTeleportId&&(delete t.dataset.duetTeleportId,t.inert=!1))}))}_deletionObserverCallback(t){t.forEach((t=>{(Array.from(t.removedNodes).includes(this.element)||Array.from(t.removedNodes).some((t=>t.contains(this.stub))))&&this._remove()}))}}export{t as T}