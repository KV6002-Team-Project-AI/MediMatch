/*!
 * Built with Duet Design System
 */
import{r as t,c as s,h as i,H as e,g as o}from"./p-662da762.js";import{c as n,o as a,f as r}from"./p-00c8a755.js";import{i as p}from"./p-a58bd561.js";import{f as h,c as d,b as c,o as u}from"./p-2bb2b022.js";import{T as m}from"./p-ccdff614.js";const l=class{constructor(i){t(this,i),this.duetToggle=s(this,"duetToggle",7),this.updatePlacement=async()=>{if(!this.controller)return;const t=await n(this.controller,this.element,{middleware:[a({mainAxis:this.mainAxisOffset,crossAxis:this.crossAxisOffset}),r()],placement:this.placement,strategy:this.position});this.menuY=t.y,this.menuX=t.x},this.open=!1,this.menuY=void 0,this.menuX=void 0,this.accessibleLabel=void 0,this.theme="",this.controller=void 0,this.placement="bottom-start",this.position="absolute",this.mainAxisOffset=0,this.crossAxisOffset=0}componentWillLoad(){p(this),this.teleport=new m(this.element)}componentDidLoad(){this.updatePlacement()}handleKeyUp(t){this.open&&h(t)&&(this.focusController(),this.hide())}async handleKeyDown(t){if(this.open){if(d(t)){t.preventDefault();const s=await this.getFocusedItemIndex();-1!==s&&(s<this.itemElements.length-1?this.itemElements[s+1].setFocus():this.itemElements[0].setFocus())}if(c(t)){t.preventDefault();const s=await this.getFocusedItemIndex();-1!==s&&(0===s?this.itemElements[this.itemElements.length-1].setFocus():this.itemElements[s-1].setFocus())}u(t)&&(t.preventDefault(),this.hide())}}handleClick(t){const s=t.composedPath().every((t=>t!==this.element&&t!==this.controller));this.open&&s&&this.hide()}async isOpen(){return this.open}async show(){this.open=!0,this.teleport.go(),this.itemElements[0].setFocus(),this.duetToggle.emit({open:this.open,component:"duet-popup-menu"}),this.updatePlacement()}async hide(){this.open=!1,this.duetToggle.emit({open:this.open,component:"duet-popup-menu"}),this.focusController(),this.teleport.resume(200)}async toggle(){this.open?this.hide():this.show()}focusController(){this.controller&&("setFocus"in this.controller?this.controller.setFocus():this.controller.focus())}get itemElements(){return Array.from(this.element.querySelectorAll(":scope > duet-popup-menu-item"))}async getFocusedItemIndex(){const t=this.itemElements;for(let s=0;s<t.length;s++)if(await t[s].isFocused())return s;return-1}render(){return i(e,{class:this.position},i("div",{style:{top:`${this.menuY}px`,left:`${this.menuX}px`},class:{open:this.open,"duet-popup-menu-list":!0,"duet-theme-turva":"turva"===this.theme},role:"menu","aria-label":this.accessibleLabel},i("slot",null)))}get element(){return o(this)}};l.style="*,*::after,*::before{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}:host{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}.duet-popup-menu-list{position:absolute;top:0;left:0;z-index:950;width:max-content;min-width:175px;padding:8px;margin:0;color:rgb(0, 41, 77);list-style:none;visibility:hidden !important;background:rgb(255, 255, 255);border-radius:8px;box-shadow:0 0 0 1px rgba(0, 0, 0, 0.07), 0 4px 10px 0 rgba(0, 41, 77, 0.15);opacity:0;transition:transform 300ms ease, visibility 300ms ease, opacity 300ms ease;transform:scaleY(0);transform-origin:top center}.duet-popup-menu-list.open{visibility:visible !important;opacity:1;transform:scaleY(1)}.duet-popup-menu-list.fixed{position:fixed}.duet-popup-menu-list.duet-theme-turva{color:rgb(23, 28, 58) !important;background:rgb(255, 255, 255)}";export{l as duet_popup_menu}