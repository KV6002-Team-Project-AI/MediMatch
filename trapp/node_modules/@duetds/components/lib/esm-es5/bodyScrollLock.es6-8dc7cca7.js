/*!
 * Built with Duet Design System
 */
var __spreadArray=this&&this.__spreadArray||function(e,n,i){if(i||arguments.length===2)for(var t=0,o=n.length,r;t<o;t++){if(r||!(t in n)){if(!r)r=Array.prototype.slice.call(n,0,t);r[t]=n[t]}}return e.concat(r||Array.prototype.slice.call(n))};var hasPassiveEvents=false;if(typeof window!=="undefined"){var passiveTestOptions={get passive(){hasPassiveEvents=true;return undefined}};window.addEventListener("testPassive",null,passiveTestOptions);window.removeEventListener("testPassive",null,passiveTestOptions)}var isIosDevice=typeof window!=="undefined"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);var locks=[];var documentListenerAdded=false;var initialClientY=-1;var previousBodyOverflowSetting;var previousBodyPaddingRight;var allowTouchMove=function(e){return locks.some((function(n){if(n.options.allowTouchMove&&n.options.allowTouchMove(e)){return true}return false}))};var preventDefault=function(e){var n=e||window.event;if(allowTouchMove(n.target)){return true}if(n.touches.length>1)return true;if(n.preventDefault)n.preventDefault();return false};var setOverflowHidden=function(e){if(previousBodyPaddingRight===undefined){var n=!!e&&e.reserveScrollBarGap===true;var i=window.innerWidth-document.documentElement.clientWidth;if(n&&i>0){previousBodyPaddingRight=document.body.style.paddingRight;document.body.style.paddingRight="".concat(i,"px")}}if(previousBodyOverflowSetting===undefined){previousBodyOverflowSetting=document.body.style.overflow;document.body.style.overflow="hidden"}};var restoreOverflowSetting=function(){if(previousBodyPaddingRight!==undefined){document.body.style.paddingRight=previousBodyPaddingRight;previousBodyPaddingRight=undefined}if(previousBodyOverflowSetting!==undefined){document.body.style.overflow=previousBodyOverflowSetting;previousBodyOverflowSetting=undefined}};var isTargetElementTotallyScrolled=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:false};var handleScroll=function(e,n){var i=e.targetTouches[0].clientY-initialClientY;if(allowTouchMove(e.target)){return false}if(n&&n.scrollTop===0&&i>0){return preventDefault(e)}if(isTargetElementTotallyScrolled(n)&&i<0){return preventDefault(e)}e.stopPropagation();return true};var disableBodyScroll=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(locks.some((function(n){return n.targetElement===e}))){return}var i={targetElement:e,options:n||{}};locks=__spreadArray(__spreadArray([],locks,true),[i],false);if(isIosDevice){e.ontouchstart=function(e){if(e.targetTouches.length===1){initialClientY=e.targetTouches[0].clientY}};e.ontouchmove=function(n){if(n.targetTouches.length===1){handleScroll(n,e)}};if(!documentListenerAdded){document.addEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:false}:undefined);documentListenerAdded=true}}else{setOverflowHidden(n)}};var enableBodyScroll=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}locks=locks.filter((function(n){return n.targetElement!==e}));if(isIosDevice){e.ontouchstart=null;e.ontouchmove=null;if(documentListenerAdded&&locks.length===0){document.removeEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:false}:undefined);documentListenerAdded=false}}else if(!locks.length){restoreOverflowSetting()}};export{disableBodyScroll as d,enableBodyScroll as e};