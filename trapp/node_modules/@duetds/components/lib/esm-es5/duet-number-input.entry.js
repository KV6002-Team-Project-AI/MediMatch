var __awaiter=this&&this.__awaiter||function(t,e,n,u){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function a(t){try{o(u.next(t))}catch(t){r(t)}}function s(t){try{o(u["throw"](t))}catch(t){r(t)}}function o(t){t.done?n(t.value):i(t.value).then(a,s)}o((u=u.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},u,i,r,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return o([t,e])}}function o(s){if(u)throw new TypeError("Generator is already executing.");while(a&&(a=0,s[0]&&(n=0)),n)try{if(u=1,i&&(r=s[0]&2?i["return"]:s[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;if(i=0,r)s=[s[0]&2,r.value];switch(s[0]){case 0:case 1:r=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;i=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(r=n.trys,r=r.length>0&&r[r.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!r||s[1]>r[0]&&s[1]<r[3])){n.label=s[1];break}if(s[0]===6&&n.label<r[1]){n.label=r[1];r=s;break}if(r&&n.label<r[2]){n.label=r[2];n.ops.push(s);break}if(r[2])n.ops.pop();n.trys.pop();continue}s=e.call(t,n)}catch(t){s=[6,t];i=0}finally{u=r=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};
/*!
 * Built with Duet Design System
 */import{r as registerInstance,c as createEvent,h,H as Host,g as getElement}from"./index-909a963e.js";import{i as inheritGlobalTheme}from"./themeable-component-724c0f7e.js";import{c as createID}from"./create-id-149a1b6d.js";import{a as isArrowRightKey,b as isArrowUpKey,c as isArrowDownKey,d as isArrowLeftKey,e as isBackspaceKey,s as subscribeTabbingChange,u as unsubscribeTabbingChange}from"./keyboard-utils-eba88365.js";import{a as getLanguage,b as getLocale,g as getLocaleString,c as connectLanguageChangeObserver,d as disconnectLanguageChangeObserver}from"./language-utils-00ca4c55.js";import"./string-utils-ca039233.js";var actionAdd={title:"action-add",tags:"action add plus",svg:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img"><path d="M12 24a.75.75 0 0 1-.75-.75v-10.5H.75a.75.75 0 0 1 0-1.5h10.5V.75a.75.75 0 0 1 1.5 0v10.5h10.5a.75.75 0 0 1 0 1.5h-10.5v10.5A.75.75 0 0 1 12 24z"/></svg>'};var actionSubtract={title:"action-subtract",tags:"action subtract minus remove delete cancel",svg:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img"><path d="M.75 12.788a.75.75 0 0 1 0-1.5h22.5a.75.75 0 0 1 0 1.5z"/></svg>'};function SafeParseFloat(t,e){var n;if(typeof t==="string"){if(t===""){return null}var u=t.replace("−","-").replace("‐","-").replace("−","-").replace("–","-").replace("—","-");if(e){u=ConvertToEnUS(u,e,false)}u=u.replace(/\s+/g,"");u=u.replace(/(?!^-?\d*\.{0,1}\d+$)/g,"");n=parseFloat(u)}if(typeof t==="number"){n=parseFloat(String(t))}if(!isNaN(Number(n))){return Number(n)}if(t===null||t===undefined){return null}throw new Error("Invalid value passed to SafeParseFloat")}function ConvertToEnUS(t,e,n){if(n===void 0){n=false}var u;var i=new Intl.NumberFormat(e).format(1/2).replace(/[0-9]/g,"");var r=new Intl.NumberFormat("en-US").format(1/2).replace(/[0-9]/g,"");var a=new Intl.NumberFormat(e).format(1e3).replace(/[0-9]/g,"");var s=new Intl.NumberFormat("en-US").format(1e3).replace(/[0-9]/g,"");u=t.replace(i,"DECIMALSEPARATOR");if(n){u=u.replace(a,"THOUSANDSEPARATOR")}else{u=u.replace(a,"")}u=u.replace("DECIMALSEPARATOR",r);u=u.replace("THOUSANDSEPARATOR",s);return u}var roundTo=function(t,e){return Math.round(t/e)*e};var clamp=function(t,e,n){return Math.min(Math.max(t,e),n)};var duetNumberInputCss='*.sc-duet-number-input,*.sc-duet-number-input::after,*.sc-duet-number-input::before{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}.sc-duet-number-input-h{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none;margin-right:16px !important;margin-bottom:12px !important;display:inline-flex;width:100%;min-width:calc(33.333% - 8px);max-width:100%;line-height:1.25;text-align:left;vertical-align:bottom}.sc-duet-number-input-h:last-child,.sc-duet-number-input-h:last-of-type{margin-right:0 !important}@media (min-width: 36em){.sc-duet-number-input-h{width:calc(50% - 16px - 3px)}}.duet-expand.sc-duet-number-input-h{width:100% !important}.duet-m-0.sc-duet-number-input-h{margin:0 !important}.duet-number-container.sc-duet-number-input{position:relative;width:100%}.duet-number-buttons.sc-duet-number-input{-webkit-user-select:none;user-select:none;position:absolute;top:1px;right:1px;z-index:200;width:96px;height:calc(100% - 2px)}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input{position:relative;display:inline-flex;align-items:center;justify-content:center;width:50%;height:100%;text-align:center;cursor:pointer;background:transparent;-webkit-appearance:none;appearance:none}.duet-number-buttons.sc-duet-number-input .duet-number-button[aria-disabled=true].sc-duet-number-input,.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:disabled{pointer-events:none}.duet-number-buttons.sc-duet-number-input .duet-number-button[aria-disabled=true].sc-duet-number-input duet-icon.sc-duet-number-input,.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:disabled duet-icon.sc-duet-number-input{opacity:0.4}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:active duet-icon.sc-duet-number-input{transform:translateY(1px)}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:focus{outline:0}.user-is-tabbing.sc-duet-number-input-h .duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:focus{z-index:2;box-shadow:0 0 0 2px #0077b3 !important}.duet-theme-turva .user-is-tabbing.sc-duet-number-input-h .duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:focus{box-shadow:0 0 0 2px #171c3a !important}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:first-of-type{border-left:1px solid rgb(207, 210, 212)}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:first-of-type::before{position:absolute;top:0;left:-6px;width:6px;height:100%;content:"";background:linear-gradient(to left, rgba(207, 210, 212, 0.2) 0%, rgba(207, 210, 212, 0.2) 1px, rgba(207, 210, 212, 0.1) 1px, rgba(207, 210, 212, 0) 100%)}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:last-of-type{border-top-right-radius:4px;border-bottom-right-radius:4px}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:last-of-type::before{position:absolute;top:20%;left:0;width:1px;height:60%;content:"";background:rgb(225, 227, 230)}.duet-theme-turva.sc-duet-number-input-h .duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:first-of-type::before{background:linear-gradient(to left, rgba(207, 207, 209, 0.2) 0%, rgba(207, 207, 209, 0.2) 1px, rgba(207, 207, 209, 0.1) 1px, rgba(207, 207, 209, 0) 100%)}.duet-theme-turva.sc-duet-number-input-h .duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:last-of-type::before{background:rgb(228, 228, 230)}';var DuetNumberInput=function(){function t(t){var e=this;registerInstance(this,t);this.duetChange=createEvent(this,"duetChange",3);this.duetInput=createEvent(this,"duetInput",3);this.duetBlur=createEvent(this,"duetBlur",7);this.duetFocus=createEvent(this,"duetFocus",7);this.inputId=createID("DuetInput");this.handleFocus=function(){e.focusedValue=e.value};this.handleKeyDown=function(t){if(isArrowRightKey(t)||isArrowUpKey(t)){e.add(t)}else if(isArrowDownKey(t)||isArrowLeftKey(t)){e.subtract(t)}else if(isBackspaceKey(t)){e.clearValue()}};this.handleChange=function(t){var n=t.target;if(n&&n.value){try{var u=SafeParseFloat(n.value,e.locale);if(isNaN(u)||u==null){u=e.min||0}e.setValue(u);e.duetInput.emit({component:"duet-number-input",originalEvent:t,value:SafeParseFloat(e.value,e.locale).toString(),valueAsNumber:u})}catch(n){e.duetInput.emit({component:"duet-number-input",originalEvent:t,value:null,valueAsNumber:null})}}else{e.duetInput.emit({component:"duet-number-input",originalEvent:t,value:null,valueAsNumber:null})}};this.handleBlur=function(t){var n=t.target;if(!n){return}if(n.value){try{var u=SafeParseFloat(n.value,e.locale);if(e.rounding){u=roundTo(u,e.step)}u=clamp(u,e.min,e.max);if(u!==SafeParseFloat(e.value,e.locale)||u!==SafeParseFloat(e.focusedValue,e.locale)){e.setValue(u);e.emitChange(t)}}catch(n){e.emitNull(t)}}else{e.emitNull(t)}};this.emitChange=function(t){var n=SafeParseFloat(e.value,e.locale);e.duetChange.emit({originalEvent:t,value:n.toString(),valueAsNumber:n,component:"duet-number-input"})};this.emitNull=function(t){e.duetChange.emit({originalEvent:t,value:null,valueAsNumber:null,component:"duet-number-input"})};this.localizeValue=function(t){return t.toLocaleString(e.locale)};this.setValue=function(t){e.value=e.localizeValue(t);e.duetInputElement.value="".concat(e.value," ").concat(e.unit)};this.add=function(t){if(t){t.preventDefault()}var n=SafeParseFloat(e.value,e.locale);if(n===e.max){return}var u=n==null?e.min:n+e.step;if(u%e.step!==0){var i=u%e.step;u-=i}var r=clamp(u,e.min,e.max);e.value=e.localizeValue(r);e.emitChange(t)};this.subtract=function(t){if(t){t.preventDefault()}var n=SafeParseFloat(e.value,e.locale);if(n===e.min){return}var u=n-e.step;if(u%e.step!==0){var i=e.step-u%e.step;u+=i}u=clamp(u,e.min,e.max);e.value=e.localizeValue(u);e.emitChange(t)};this.language=getLanguage();this.locale=getLocale(this.language).locale;this.unit=getLocale(this.language).money;this.focusedValue=undefined;this.accessibleActiveDescendant=undefined;this.accessibleControls=undefined;this.accessibleDetails=undefined;this.accessibleLabelledBy=undefined;this.accessibleDescription=undefined;this.accessibleOwns=undefined;this.accessibleDescribedBy=undefined;this.accessibleLiveDefaults={fi:"{current} euroa valittuna",en:"{current} euros selected",sv:"{current} euro valt"};this.accessibleLive=getLocaleString(this.accessibleLiveDefaults,this.language);this.accessibleLiveEnabled=true;this.accessibleAddDefaults={fi:"Lisää summaan",en:"Add to the amount",sv:"Lägg till beloppet"};this.accessibleAdd=getLocaleString(this.accessibleAddDefaults,this.language);this.accessibleSubtractDefaults={fi:"Vähennä summasta",en:"Subtract from the amount",sv:"Dra från beloppet"};this.accessibleSubtract=getLocaleString(this.accessibleSubtractDefaults,this.language);this.theme="";this.margin="auto";this.expand=false;this.identifier=undefined;this.min=0;this.labelDefaults={fi:"Nimilappu",en:"Label",sv:"Etikett"};this.label=getLocaleString(this.labelDefaults,this.language);this.labelHidden=false;this.max=1e6;this.name=undefined;this.error="";this.tooltip="";this.step=5e3;this.rounding=true;this.role=undefined;this.disabled=false;this.required=false;this.value=undefined}t.prototype.componentWillLoad=function(){inheritGlobalTheme(this);if(this.value){this.value=this.localizeValue(SafeParseFloat(this.value,this.locale))}};t.prototype.connectedCallback=function(){connectLanguageChangeObserver(this,[{prop:"accessibleLive",defaults:"accessibleLiveDefaults"},{prop:"accessibleAdd",defaults:"accessibleAddDefaults"},{prop:"accessibleSubtract",defaults:"accessibleSubtractDefaults"},{prop:"label",defaults:"labelDefaults"}]);subscribeTabbingChange(this)};t.prototype.disconnectedCallback=function(){disconnectLanguageChangeObserver(this);unsubscribeTabbingChange(this)};t.prototype.setFocus=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.duetInputElement.setFocus(t);return[2]}))}))};t.prototype.getValueAsNumber=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(e){t=SafeParseFloat(this.value,this.locale);return[2,this.value===undefined||this.value===null||isNaN(t)?null:t]}))}))};t.prototype.clearValue=function(){this.value=null;this.duetInputElement.value=""};t.prototype.formatAnnouncement=function(){var t=!!this.value?SafeParseFloat(this.value,this.locale):null;if(t==null){return""}return this.accessibleLive.replace("{current}",t.toString(10))};t.prototype.render=function(){var t=this;var e=this.identifier||this.inputId;var n="".concat(this.localizeValue(this.max)," ").concat(this.unit).length;var u=!!this.value?SafeParseFloat(this.value,this.locale):null;return h(Host,{class:{"duet-theme-turva":this.theme==="turva","duet-expand":this.expand,"duet-m-0":this.margin==="none"}},h("div",{class:"duet-number-container"},h("duet-input",{ref:function(e){return t.duetInputElement=e},onDuetChange:function(e){return t.handleChange(e)},onDuetFocus:this.handleFocus,onDuetBlur:function(e){return t.handleBlur(e)},onKeyDown:function(e){return t.handleKeyDown(e)},label:this.label,value:this.value?"".concat(this.value," ").concat(this.unit):"",error:this.error,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":u!=null?u:"",maxlength:n,name:this.name,component:"number",required:this.required,disabled:this.disabled,role:this.role,labelHidden:this.labelHidden,tooltip:this.tooltip,identifier:e,theme:this.theme,margin:"none",expand:true,numericKeyboard:true,autoComplete:"off",type:"text",accessibleActiveDescendant:this.accessibleActiveDescendant,accessibleLabelledBy:this.accessibleLabelledBy,accessibleDescription:this.accessibleDescription,accessibleDetails:this.accessibleDetails,accessibleControls:this.accessibleControls,accessibleOwns:this.accessibleOwns,accessibleDescribedBy:this.accessibleDescribedBy},h("div",{class:{"duet-number-buttons":true,"duet-no-label":this.labelHidden}},h("button",{"aria-controls":e,disabled:this.disabled,"aria-disabled":u==null||u===this.min?"true":"false",class:"duet-number-button duet-number-button-subtract",onClick:this.subtract,type:"button"},h("duet-visually-hidden",null,this.accessibleSubtract," ",this.step),h("duet-icon",{icon:actionSubtract.svg,size:"small",margin:"none",color:this.theme==="turva"?"secondary-turva":"secondary"})),h("button",{"aria-controls":e,disabled:this.disabled,"aria-disabled":u===this.max?"true":"false",class:"duet-number-button duet-number-button-add",onClick:this.add,type:"button"},h("duet-visually-hidden",null,this.accessibleAdd," ",this.step),h("duet-icon",{icon:actionAdd.svg,size:"small",margin:"none",color:this.theme==="turva"?"secondary-turva":"secondary"})))),this.accessibleLiveEnabled&&h("duet-visually-hidden",{"aria-live":"polite","aria-atomic":"true","aria-relevant":"all"},this.formatAnnouncement())))};Object.defineProperty(t.prototype,"element",{get:function(){return getElement(this)},enumerable:false,configurable:true});return t}();DuetNumberInput.style=duetNumberInputCss;export{DuetNumberInput as duet_number_input};