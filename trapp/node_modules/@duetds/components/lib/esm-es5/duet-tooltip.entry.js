var __awaiter=this&&this.__awaiter||function(t,e,i,n){function s(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,o){function r(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n["throw"](t))}catch(t){o(t)}}function u(t){t.done?i(t.value):s(t.value).then(r,a)}u((n=n.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,r;return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return u([t,e])}}function u(a){if(n)throw new TypeError("Generator is already executing.");while(r&&(r=0,a[0]&&(i=0)),i)try{if(n=1,s&&(o=a[0]&2?s["return"]:a[0]?s["throw"]||((o=s["return"])&&o.call(s),0):s.next)&&!(o=o.call(s,a[1])).done)return o;if(s=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:i.label++;return{value:a[1],done:false};case 5:i.label++;s=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(a[0]===6&&i.label<o[1]){i.label=o[1];o=a;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(a);break}if(o[2])i.ops.pop();i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t];s=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};
/*!
 * Built with Duet Design System
 */import{r as registerInstance,h,H as Host,g as getElement}from"./index-909a963e.js";import{m as media_query_medium,a as media_query_large}from"./tokens-04106a43.js";import{c as computePosition,f as flip,s as shift,a as arrow}from"./floating-ui.dom.esm-efad5c89.js";import{i as inheritGlobalTheme}from"./themeable-component-724c0f7e.js";import{c as createID}from"./create-id-149a1b6d.js";import{f as isEscapeKey}from"./keyboard-utils-eba88365.js";import{a as getLanguage,g as getLocaleString,c as connectLanguageChangeObserver,d as disconnectLanguageChangeObserver}from"./language-utils-00ca4c55.js";import"./string-utils-ca039233.js";var duetTooltipCss="*.sc-duet-tooltip,*.sc-duet-tooltip::after,*.sc-duet-tooltip::before{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}.sc-duet-tooltip-h{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none;z-index:200;display:inline-flex;width:auto;margin-top:-16px !important;margin-left:-3px !important;-webkit-tap-highlight-color:transparent}duet-tooltip-button.sc-duet-tooltip{position:relative}duet-tooltip-popup.sc-duet-tooltip{position:absolute}";var DuetTooltip=function(){function t(t){var e=this;registerInstance(this,t);this.mql=[window.matchMedia(media_query_medium.replace(/'/g,"")),window.matchMedia(media_query_large.replace(/'/g,""))];this.tooltipId=createID("DuetTooltip");this.aboutString={fi:"aiheesta",en:"about",sv:"om"};this.openTooltip=function(){e.active=true;e.focusTarget="tooltip"};this.closeTooltip=function(t){if(t===void 0){t=false}e.active=false;if(t){e.focusTarget="trigger"}setTimeout((function(){e.updatePlacement()}),200)};this.toggleOpen=function(){e.active?e.closeTooltip():e.openTooltip()};this.updatePlacement=function(){return __awaiter(e,void 0,void 0,(function(){var t,e,i,n,s;return __generator(this,(function(o){switch(o.label){case 0:i=true;if(this.breakpoint==="large"&&!this.mql[1].matches){i=false}else if(this.breakpoint==="medium"&&!this.mql[0].matches){i=false}n=i?"top-start":"top-end";if(this.direction==="left"){n="top-end"}else if(this.direction==="right"){n="top-start"}return[4,computePosition(this.buttonEl,this.popupElement,{placement:n,middleware:[flip(),shift({padding:5}),arrow({element:this.arrowEl})]})];case 1:s=o.sent();this.tooltipY=s.y;this.tooltipX=s.x;this.placement=s.placement;this.arrowY=(t=s.middlewareData.arrow)===null||t===void 0?void 0:t.y;this.arrowX=(e=s.middlewareData.arrow)===null||e===void 0?void 0:e.x;return[2]}}))}))};this.placement="bottom";this.tooltipY=undefined;this.tooltipX=undefined;this.arrowX=undefined;this.arrowY=undefined;this.theme="";this.language=getLanguage();this.accessibleLabelDefault={fi:"Näytä lisätietoja",en:"Show more information",sv:"Visa mer tilläggsuppgifter"};this.accessibleLabel=getLocaleString(this.accessibleLabelDefault,this.language);this.accessibleAboutLabel=undefined;this.accessibleInputLabel=undefined;this.accessibleCloseLabelDefault={fi:"Sulje lisätiedot",en:"Close details",sv:"Stäng tilläggsuppgifter"};this.accessibleCloseLabel=getLocaleString(this.accessibleCloseLabelDefault,this.language);this.label="";this.breakpoint="medium";this.direction="auto";this.positionVertical="0";this.positionHorizontal="0";this.active=false}t.prototype.componentWillLoad=function(){inheritGlobalTheme(this)};t.prototype.componentDidLoad=function(){return __awaiter(this,void 0,void 0,(function(){var t,e;return __generator(this,(function(i){switch(i.label){case 0:t=this;return[4,this.popupElement.getArrowElement()];case 1:t.arrowEl=i.sent();e=this;return[4,this.popupElement.getContentElement()];case 2:e.contentEl=i.sent();this.updatePlacement();if(this.active){this.openTooltip()}this.intersectionObserver=new IntersectionObserver(this.updatePlacement,{root:document.body});this.intersectionObserver.observe(this.element);return[2]}}))}))};t.prototype.componentDidUpdate=function(){var t=this;switch(this.focusTarget){case"tooltip":setTimeout((function(){return t.contentEl.focus({preventScroll:true})}));break;case"trigger":setTimeout((function(){return t.buttonEl.setFocus({preventScroll:true})}));break}this.focusTarget=null};t.prototype.connectedCallback=function(){connectLanguageChangeObserver(this,[{prop:"accessibleLabel",defaults:"accessibleLabelDefault"},{prop:"accessibleCloseLabel",defaults:"accessibleCloseLabelDefault"}])};t.prototype.disconnectedCallback=function(){disconnectLanguageChangeObserver(this)};t.prototype.onScroll=function(){var t=this;clearTimeout(this.scrollTimer);this.scrollTimer=setTimeout((function(){if(t.active){t.updatePlacement()}}),100)};t.prototype.handleWindowResize=function(){var t=this;clearTimeout(this.resizeTimer);this.resizeTimer=setTimeout((function(){t.updatePlacement()}),100)};t.prototype.handleDocumentClick=function(t){var e=this;if(!this.active){return}var i=t.composedPath();var n=i.every((function(t){return t!==e.element&&t!==e.contentEl}));if(n){this.closeTooltip()}};t.prototype.handleKeyDown=function(t){if(this.active&&isEscapeKey(t)){this.closeTooltip(true)}};t.prototype.handlePopupClose=function(){if(this.active){this.closeTooltip(true)}};t.prototype.handleActiveChange=function(t){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(i){if(t){setTimeout((function(){return e.updatePlacement()}),10)}else{setTimeout((function(){return e.updatePlacement()}),300)}return[2]}))}))};t.prototype.render=function(){var t=this;var e={transform:"translateY(".concat(this.positionVertical,") translateX(").concat(this.positionHorizontal,")"),zIndex:this.active?"201":""};var i={position:"relative",overflow:this.active?"visible":"hidden"};var n={top:"".concat(this.tooltipY,"px"),left:"".concat(this.tooltipX,"px"),display:"block","pointer-events":this.active?"auto":"none"};var s={top:this.arrowY?"".concat(this.arrowY,"px"):undefined,left:this.arrowX?"".concat(this.arrowX,"px"):undefined};return h(Host,{style:e},h("duet-tooltip-button",{ref:function(e){return t.buttonEl=e},active:this.active,tooltipId:this.tooltipId,label:this.label,accessibleLabel:this.accessibleInputLabel&&"".concat(this.accessibleInputLabel,", ").concat(this.accessibleLabel)||this.accessibleAboutLabel&&"".concat(this.accessibleLabel," ").concat(this.aboutString[this.language]," ").concat(this.accessibleAboutLabel)||this.accessibleLabel,onClick:this.toggleOpen,theme:this.theme}),h("div",{style:i},h("duet-tooltip-popup",{ref:function(e){return t.popupElement=e},active:this.active,tooltipId:this.tooltipId,arrowStyles:s,style:n,placement:this.placement,accessibleCloseLabel:this.accessibleCloseLabel,theme:this.theme},h("slot",null))))};Object.defineProperty(t.prototype,"element",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{active:["handleActiveChange"]}},enumerable:false,configurable:true});return t}();DuetTooltip.style=duetTooltipCss;export{DuetTooltip as duet_tooltip};