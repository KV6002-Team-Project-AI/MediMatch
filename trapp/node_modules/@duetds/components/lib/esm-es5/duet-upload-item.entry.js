var __awaiter=this&&this.__awaiter||function(e,t,n,i){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i["throw"](e))}catch(e){r(e)}}function l(e){e.done?n(e.value):a(e.value).then(s,o)}l((i=i.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,a,r,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return l([e,t])}}function l(o){if(i)throw new TypeError("Generator is already executing.");while(s&&(s=0,o[0]&&(n=0)),n)try{if(i=1,a&&(r=o[0]&2?a["return"]:o[0]?a["throw"]||((r=a["return"])&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;if(a=0,r)o=[o[0]&2,r.value];switch(o[0]){case 0:case 1:r=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;a=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(r=n.trys,r=r.length>0&&r[r.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!r||o[1]>r[0]&&o[1]<r[3])){n.label=o[1];break}if(o[0]===6&&n.label<r[1]){n.label=r[1];r=o;break}if(r&&n.label<r[2]){n.label=r[2];n.ops.push(o);break}if(r[2])n.ops.pop();n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e];a=0}finally{i=r=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};
/*!
 * Built with Duet Design System
 */import{r as registerInstance,h,g as getElement}from"./index-909a963e.js";import{i as inheritGlobalTheme}from"./themeable-component-724c0f7e.js";import{g as getLocaleString}from"./language-utils-00ca4c55.js";import{a as getI18nError}from"./errorcodes.utils-e681347c.js";import"./string-utils-ca039233.js";var formatBytes=function(e,t){if(t===void 0){t=2}if(e===0){return"0 Bytes"}var n=1024;var i=t<0?0:t;var a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];var r=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,r)).toFixed(i))+" "+a[r]};var duetUploadItemCss=".file-link::part(duet-link){text-decoration:none}";var DuetUploadItem=function(){function e(e){var t=this;registerInstance(this,e);this.fileUploadingInfo={fi:"Tiedosto latautuu",sv:"Filen laddas upp",en:"File is uploading"};this.onLinkClick=function(e){var n=t.data,i=n.url,a=n.meta;if(!!t.linkClickEvent){e.preventDefault();t.linkClickEvent.emit({component:"duet-upload",data:{name:t.data.item.name,url:i,meta:a}})}};this.theme="";this.data=undefined;this.type=undefined;this.showLinks=undefined;this.actions=undefined;this.label=undefined;this.categoryLabel=undefined;this.errorCodes=undefined;this.showCategory=undefined;this.linkClickEvent=undefined}e.prototype.componentWillLoad=function(){inheritGlobalTheme(this)};e.prototype.focusActionButton=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:if(!this.actionButton)return[3,2];return[4,this.actionButton.setFocus({preventScroll:true})];case 1:e.sent();this.actionButton.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});e.label=2;case 2:return[2]}}))}))};e.prototype.getFileNameLine=function(){var e=this.data,t=e.item,n=e.size,i=e.uploaded,a=e.url,r=e.progress,s=e.error;var o=t.name;var l=h("span",{class:"duet-upload-item-name"},h("duet-icon",{margin:"none",size:"x-small",name:"messaging-attachment"}),h("duet-spacer",{size:"xx-small",direction:"horizontal"}),o);var u=h("span",{class:"duet-upload-item-size",style:{fontSize:"14px",fontWeight:"400"}},"(",formatBytes(n),")");switch(this.type){case"inprogress":return h("span",{class:"duet-upload-item-name",role:"status"},h("duet-paragraph",{class:"duet-upload-item-name",color:"gray-darker",margin:"none",weight:"semi-bold"},h("duet-icon",{margin:"none",size:"x-small",name:"messaging-attachment"}),h("duet-spacer",{size:"xx-small",direction:"horizontal"}),o),h("duet-visually-hidden",null,h("duet-paragraph",null,getLocaleString(this.fileUploadingInfo))),h("duet-progress",{progress:Math.ceil(r),"aria-hidden":true}));case"pending":return h("span",{class:"duet-upload-item-name"},h("duet-icon",{margin:"none",size:"x-small",name:"messaging-attachment"}),h("duet-spacer",{size:"xx-small",direction:"horizontal"}),o);case"failure":return h("span",{class:"duet-upload-item-error",role:"status"},h("duet-paragraph",{class:"duet-upload-item-name",color:"danger",margin:"none",weight:"semi-bold"},h("duet-icon",{margin:"none",size:"x-small",name:"messaging-attachment"}),h("duet-spacer",{size:"xx-small",direction:"horizontal"}),o),h("duet-paragraph",{class:"duet-upload-item-error-label",size:"small",margin:"none",color:"danger"},getI18nError(s.type,this.errorCodes)));default:return i&&a&&this.showLinks?h("duet-paragraph",{color:"secondary",margin:"none",weight:"semi-bold"},h("duet-link",{class:"file-link",onClick:this.onLinkClick,url:a},l),h("duet-spacer",{size:"xx-small",direction:"horizontal"}),u):h("duet-paragraph",{color:"secondary",margin:"none",weight:"semi-bold"},l,h("duet-spacer",{size:"xx-small",direction:"horizontal"}),u)}};e.prototype.render=function(){var e=this;var t=this.data,n=t.uid,i=t.meta,a=t.item;var r=i&&i.badges?h("span",null,i.badges.map((function(e){return h("duet-badge",{color:"primary"},e)}))):undefined;var s="".concat(i&&i.badges?i.badges.join(","):""," ").concat(a.name);return h("div",{class:{"upload-item-row":true}},this.showCategory&&h("div",{class:"item-categories"},h("duet-heading",{class:"heading",color:"color-secondary",level:"h6",weight:"semibold"},getLocaleString(this.categoryLabel)),r),h("div",{class:{"item-name":true,"no-category":!this.showCategory}},!!this.label&&h("duet-heading",{class:"heading",color:"color-secondary",level:"h6",weight:"semibold"},getLocaleString(this.label)),this.getFileNameLine()),h("div",{class:"item-actions"},this.actions.map((function(t){return h("duet-action-button",{actionMeta:Object.assign({},i||{}),actionId:n||null,actionName:t.name,theme:e.theme,iconName:t.icon,iconColor:t.color,iconSize:t.size,background:t.background,"accessible-label":"".concat(s," ").concat(getLocaleString(t.label)," "),accessibleTitle:false,ref:function(t){return e.actionButton=t}})}))))};Object.defineProperty(e.prototype,"element",{get:function(){return getElement(this)},enumerable:false,configurable:true});return e}();DuetUploadItem.style=duetUploadItemCss;export{DuetUploadItem as duet_upload_item};